## HTTP/HTTPS

### 1. HTTP协议

#### (1). 概述

##### a. 概念

* 是客户端浏览器或**其他程序与Web服务器**之间的**应用层通信协议**

##### b. 使用协议及端口

* TCP协议、80端口

##### c. 其他应用

* 可用于传输图像、声音、动画、视频等

#### (2). 工作模式

![HTTP工作模式](http://113.45.142.235:9001/laffrex/pictures/2024/10/07/202410071140620.png)

#### (3). URL

##### a. 概念

* 统一资源定位符(Uniform Resource Locator)，用来表示某一处资源的地址

##### b. 格式

![Url格式](http://113.45.142.235:9001/laffrex/pictures/2024/10/07/202410071140652.png)

* 锚点

  > 告诉浏览器，当加载某一个页面时，直接跳转到该页面某一id、class等标识元素的位置。

#### (4). 协议特点

##### a. 支持C/S模式

##### b. 简单快速

* 只需传送**请求方法和路径**
* HTTP服务器的**程序规模小**，**通信速度快**

##### c. 灵活

* 允许传输**任意类型**的数据对象，有Content-Type字段指定

##### d. 无状态

* 指协议对于事务处理**没有记忆能力**，如果后续处理需要前面信息，**必须重传**，导致了传送的**数据量增大**

#### (5). HTTP报文

##### a. 概述

* 分为请求报文(Request)与响应报文(Response)

##### b. 字段

###### ①Host

* 指示发出请求或响应的主机名

###### ②User-Agent

* 通常格式：Mozillia/5.0(平台) 引擎版本 浏览器版本号

###### ③Accept

* 分为文件类型和内容类型(MIME或媒体类型)

![http报文字段Accept](http://113.45.142.235:9001/laffrex/pictures/2024/10/07/202410071140642.png)

###### ④Accept-Language

* 客户端浏览器的语言

###### ⑤Accept-Endocding

* 客户端浏览器支持的文件压缩格式

###### ⑥Connection

* 指示是否保持连接

###### ⑦Refer&&Cookie

* 指示请求或响应来自哪里

###### c. 请求方法

![http报文方法](http://113.45.142.235:9001/laffrex/pictures/2024/10/07/202410071140640.png)

#### (6)状态码

##### a. 1xx

* 指示信息--表示请求已接收，继续处理

##### b. 2xx

* 成功--表示请求已被成功接收、理解、接受

| 状态码               | 描述                                         |
| -------------------- | -------------------------------------------- |
| 200  OK              | 请求成功，服务器已返回请求的资源             |
| 201  Created         | 请求成功，并且服务器已创建了新的资源         |
| 202  Accepted        | 请求**已接受**，但尚未处理完成               |
| 204  No Content      | 请求成功，但没有返回内容                     |
| 206  Partial Content | 服务器成功处理了部分请求（例如，在分块下载时 |



##### c. 3xx

* 重定向--要完成请求必须**进行更进一步的操作**

| 状态码                  | 描述                                      |
| ----------------------- | ----------------------------------------- |
| 301  Moved Permanently  | 请求的资源已**永久移动**到新的URL         |
| 302  Found              | 请求的资源**临时移动**到新的URL           |
| 304  Not Modified       | **资源未修改**，客户端可以使用缓存的版本  |
| 307  Temporary Redirect | **临时重定向**，请求资源暂时位于另一个URL |

##### d. 4xx

* 客户端错误--请求有**语法错误**或请求**无法实现**

| 错误码                  | 描述                               |
| ----------------------- | ---------------------------------- |
| 400  Bad Request        | 客户端请求的**语法错误**           |
| 401  Unauthorized       | 请求需要**身份验证**               |
| 403  Forbidden          | 服务器**拒绝执行**请求             |
| 404  Not Found          | 请求的**资源**在服务器上**找不到** |
| 405  Method Not Allowed | 请求方法**不被**服务器**允许**     |

##### e. 5xx

* 服务器错误

| 状态码                    | 描述                                                       |
| ------------------------- | ---------------------------------------------------------- |
| 500 Internal Server Error | 服务器内**部错误**，无法完成请求。                         |
| 501 Not Implemented       | 服务器**不支持**请求的方法。                               |
| 502 Bad Gateway           | 服务器作为网关或代理，从上游服务器收到**无效响应**         |
| 503 Service Unavailable   | 服务器**暂时不可用**，由于超载或系统维护                   |
| 504 Gateway Timeout       | 服务器作为网关或代理，**未能及时**从上游服务器**接收响应** |

##### f. 常见状态码

![常见状态码](http://113.45.142.235:9001/laffrex/pictures/2024/10/07/202410071140638.png)

### 2. HTTPS协议

#### (1)概述

##### a. SSL

* 安全套接字层(Secure Socket Layer)，位于**TCP/IP协议与各种应用层协议之间**，为数据通信提供**安全支持**

##### b. TLS

* 传输层安全(Transport Layer Security)，前身是SSL

#### (2)通信流程

1. 客户端和服务器端通过**TCP建立连接**，并发送htpps请求
2. 服务端响应，并**发送数字证书**给客户端(包括域名、公钥以及申请证书公司)
3. 客户端收到数字证书后，进行**合法性验证**
4. 验证通过后，客户端**生成**一个用于**对称加密的密钥**，并使用服务器**公钥对客户端密钥进行非对称加密**
5. 客户端将该**加密后的密钥发送**给服务端
6. 服务端收到后使用私钥进行非对称解密，得到客户端密钥后再将数据进行**对称加密生成密文并发送**
7. 客户端收到密文，并使用客户端密钥进行解密

### 3. HTTP与HTTPS区别

![HTTP与HTTPS区别](http://113.45.142.235:9001/laffrex/pictures/HTTP与HTTPS区别.png)