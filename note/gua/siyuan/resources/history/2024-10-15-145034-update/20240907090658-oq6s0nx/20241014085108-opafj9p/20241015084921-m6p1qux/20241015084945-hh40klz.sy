{"ID":"20241015084945-hh40klz","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4f6","id":"20241015084945-hh40klz","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20241015084945-hh40klz\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20241015084945-1nojqvb\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241015084945-1nojqvb\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20241015084945-1nojqvb\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"Linux日志分析","updated":"20241015144952"},"Children":[{"ID":"20241015141803-wkaamnc","Type":"NodeParagraph","Properties":{"id":"20241015141803-wkaamnc","updated":"20241015141820"},"Children":[{"Type":"NodeText","Data":"日志默认保存位置：/var/log/"}]},{"ID":"20241015141836-s59r3it","Type":"NodeParagraph","Properties":{"id":"20241015141836-s59r3it","updated":"20241015142243"},"Children":[{"Type":"NodeText","Data":"配置文件： /etc/rsyslog.conf"}]},{"ID":"20241015141719-8skmkbc","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","id":"20241015141719-8skmkbc","updated":"20241015141722"},"Children":[{"Type":"NodeText","Data":"日志分类"}]},{"ID":"20241015141738-idtliy5","Type":"NodeList","ListData":{},"Properties":{"fold":"1","heading-fold":"1","id":"20241015141738-idtliy5","updated":"20241015141753"},"Children":[{"ID":"20241015141753-gtz6tfi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241015141753-gtz6tfi","updated":"20241015141753"},"Children":[{"ID":"20241015141753-2ze693r","Type":"NodeParagraph","Properties":{"id":"20241015141753-2ze693r","updated":"20241015141753"},"Children":[{"Type":"NodeText","Data":"内核及系统日志：由系统服务rsyslog统一进行管理，日志格式基本相似\n"}]}]},{"ID":"20241015141754-qodplji","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241015141754-qodplji"},"Children":[{"ID":"20241015141754-rq2s24w","Type":"NodeParagraph","Properties":{"id":"20241015141754-rq2s24w"},"Children":[{"Type":"NodeText","Data":"用户日志：记录系统用户登录及退出系统的相关信息\n"}]}]},{"ID":"20241015141755-rcivr2a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241015141755-rcivr2a"},"Children":[{"ID":"20241015141755-2mypx9r","Type":"NodeParagraph","Properties":{"id":"20241015141755-2mypx9r"},"Children":[{"Type":"NodeText","Data":"程序日志：由相应的应用程序进行独立管理。如:web服务，ftp服务"}]}]}]},{"ID":"20241015141714-fbdr4y0","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241015141714-fbdr4y0","updated":"20241015141714"},"Children":[{"Type":"NodeText","Data":"​​"}]},{"ID":"20241015141937-s3kok20","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"min-width: 60px;|min-width: 60px;|min-width: 60px;","id":"20241015141937-s3kok20","updated":"20241015143847"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"文件名称"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"说明"}]},{"Type":"NodeTableCell","Data":"th"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/cron"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录系统定时任务"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/cups"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录打印信息日志"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/dmesg"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"开机内核自检信息"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/maillog"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录邮件信息"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/message"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录系统重要信息日志"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"包括系统中大多数重要的信息，首先检查"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/btmp"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"错误登录日志，二进制格式；"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"查看方式：lastb /var/log/btmp"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"lastb"},{"Type":"NodeText","Data":"​ 命令在类Unix系统中用于显示最后一次不成功的登录尝试的记录"},{"Type":"NodeBr","Data":"br"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 2%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241015142920-cazkkhz.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 2%;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/lastlog"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录用户最后一次登录的时间，使用lastlog命令查看"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 4%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241015142804-ckytmlt.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 4%;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/wtmp"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"永久记录用户登录、注销的信息，也会记录系统启动、重启、关机操作的"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"使用last命令查看"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 3%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241015143215-tkhzfks.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 3%;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/utmp"},{"Type":"NodeBr","Data":"br"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录当前已经登录的用户，用户退出登录的变化，只记录登录用户。"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"使用w\\who\\users命令查看"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 3%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241015143840-o5h5xof.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 3%;\"}"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"/var/log/secure"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"记录验证和授权信息，只要涉及账号密码都会记录，如：ssh，su，sudo"}]},{"Type":"NodeTableCell","Data":"td"}]}]},{"ID":"20241015142953-xty4er1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015142953-xty4er1","updated":"20241015144243"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"utmp日志查看方式：\n\n[root@localhost log]# w     //显示当前登录到系统的用户以及他们正在做什么\n 22:36:28 up 16 min,  1 user,  load average: 0.00, 0.01, 0.05\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nroot     pts/0    192.168.134.1    22:20    4.00s  0.01s  0.00s w\n[root@localhost log]# who\nroot     pts/0        2024-10-15 22:20 (192.168.134.1)\n[root@localhost log]# users\nroot\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241015143432-xjwmopd","Type":"NodeParagraph","Properties":{"id":"20241015143432-xjwmopd","updated":"20241015143438"},"Children":[{"Type":"NodeText","Data":"查看历史记录命令："}]},{"ID":"20241015143438-yjaozmx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015143438-yjaozmx","updated":"20241015143442"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"history\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241015143444-dk3zmsf","Type":"NodeParagraph","Properties":{"id":"20241015143444-dk3zmsf","updated":"20241015143454"},"Children":[{"Type":"NodeText","Data":"清理痕迹"}]},{"ID":"20241015143456-moy065z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015143456-moy065z","updated":"20241015143620"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\necho \u003e /var/log/btmp\necho \u003e /var/log/wtmp\necho \u003e /var/log/lastlog\nhistory -c #最后清理\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241015143701-1i8jps0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241015143701-1i8jps0","updated":"20241015143708"},"Children":[{"Type":"NodeText","Data":"查看日志的命令"}]},{"ID":"20241015143711-r062mfe","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241015143711-r062mfe","updated":"20241015143716"},"Children":[{"Type":"NodeText","Data":"1.shell命令"}]},{"ID":"20241015143716-nd8nvn9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015143716-nd8nvn9","updated":"20241015144325"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"find grep egrep awk cat more sed\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241015144327-hrt49dn","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241015144327-hrt49dn","updated":"20241015144334"},"Children":[{"Type":"NodeText","Data":"文件相关"}]},{"ID":"20241015144338-7yutcq7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015144338-7yutcq7","updated":"20241015144424"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep awk sed\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241015144428-4utbr2u","Type":"NodeParagraph","Properties":{"id":"20241015144428-4utbr2u","updated":"20241015144430"},"Children":[{"Type":"NodeText","Data":"grep"}]},{"ID":"20241015144431-i76yo18","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241015144431-i76yo18","updated":"20241015144952"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep -B 5 0anacron  cron-20210620\ngrep -C 5 0anacron  cron-20210620    #查看文件从容-0210620中匹配0anacron字段及其前后5排\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}