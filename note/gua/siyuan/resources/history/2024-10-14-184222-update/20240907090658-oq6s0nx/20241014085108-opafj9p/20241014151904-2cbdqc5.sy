{"ID":"20241014151904-2cbdqc5","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f945","id":"20241014151904-2cbdqc5","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20241014151904-2cbdqc5\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20241014151904-c7uqhwe\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241014154752-n3a8mia\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20241014151904-c7uqhwe\u0026quot;,\u0026quot;focusStart\u0026quot;:3,\u0026quot;focusEnd\u0026quot;:3\u0026#125;","title":"PHP安全加固","updated":"20241014183723"},"Children":[{"ID":"20241014151904-c7uqhwe","Type":"NodeParagraph","Properties":{"id":"20241014151904-c7uqhwe","updated":"20241014152107"},"Children":[{"Type":"NodeText","Data":"配置文件 /etc/php.ini"}]},{"ID":"20241014152221-rbaoa5m","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014152221-rbaoa5m","updated":"20241014152229"},"Children":[{"Type":"NodeText","Data":"1.安全模式"}]},{"ID":"20241014152836-8v6x8ld","Type":"NodeParagraph","Properties":{"id":"20241014152836-8v6x8ld","updated":"20241014153026"},"Children":[{"Type":"NodeText","Data":" safe_mode = On #开启，以下四个配套"}]},{"ID":"20241014152234-nvwo57k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014152234-nvwo57k","updated":"20241014152906"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"safe_mode = On #开启安全模式\nsafe_mode_exec_dir = /var/www/html/  #设置安全模式下执行程序的目录\nsafe_mode_gid = Off #关闭网站目录下的操作权限--再安全模式下不能增删改查\nsafe_mode_include_dir = /var/www/html/   #设置安全模式下包含哪些文件的路径\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014152232-3hctef6","Type":"NodeParagraph","Properties":{"id":"20241014152232-3hctef6","updated":"20241014152855"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014152855-qaqm6kn.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"}]},{"ID":"20241014152253-jrg6c98","Type":"NodeParagraph","Properties":{"id":"20241014152253-jrg6c98"}},{"ID":"20241014153105-0and9a8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014153105-0and9a8","updated":"20241014153132"},"Children":[{"Type":"NodeText","Data":"2.设置php脚本能访问的目录"}]},{"ID":"20241014153139-2emus0h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014153139-2emus0h","updated":"20241014153212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"open_basedir = /var/www/html/  #默认关闭，需要手动打开并制定路径\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014153221-16zzhqu","Type":"NodeParagraph","Properties":{"id":"20241014153221-16zzhqu","updated":"20241014153221"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014153221-bhjvazf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241014153336-vefik3j","Type":"NodeParagraph","Properties":{"id":"20241014153336-vefik3j"}},{"ID":"20241014153339-eqqfwmi","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014153339-eqqfwmi","updated":"20241014153406"},"Children":[{"Type":"NodeText","Data":"3.关闭危险函数-命令执行漏洞修复方法之一"}]},{"ID":"20241014153410-9osm70y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014153410-9osm70y","updated":"20241014153449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"disable_functions = system,shell_exec,exec,popen,passthru,proc_open,phpinfo\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014153457-udzdc2c","Type":"NodeParagraph","Properties":{"id":"20241014153457-udzdc2c","updated":"20241014153457"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014153457-923d98j.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241014153500-tmy817p","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014153500-tmy817p","updated":"20241014153557"},"Children":[{"Type":"NodeText","Data":"4.PHP版本信息隐藏"}]},{"ID":"20241014153507-x1l8o80","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014153507-x1l8o80","updated":"20241014153544"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"expose_php = Off  #默认On，要设置为关闭\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014153622-9znnoz2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014153622-9znnoz2","updated":"20241014153648"},"Children":[{"Type":"NodeText","Data":"5.关闭注册全局变量"}]},{"ID":"20241014153740-1wyuzja","Type":"NodeParagraph","Properties":{"id":"20241014153740-1wyuzja","updated":"20241014153742"},"Children":[{"Type":"NodeText","Data":"添加"}]},{"ID":"20241014153649-vvmyar2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014153649-vvmyar2","updated":"20241014153831"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"register_globals = Off \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014153844-abx9bh1","Type":"NodeParagraph","Properties":{"id":"20241014153844-abx9bh1","updated":"20241014153844"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014153844-7430q2m.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241014153845-pzr8bl2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014153845-pzr8bl2","updated":"20241014153859"},"Children":[{"Type":"NodeText","Data":"6.SQL注入防护"}]},{"ID":"20241014153859-c1bay1h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014153859-c1bay1h","updated":"20241014154008"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"magic_quotes_gbc = On   #打开防护SQL注入\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014153952-sibfod1","Type":"NodeParagraph","Properties":{"id":"20241014153952-sibfod1","updated":"20241014153952"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014153952-6jxynca.png"},{"Type":"NodeCloseParen"}]}]},{"ID":"20241014154031-x1811uk","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014154031-x1811uk","updated":"20241014154040"},"Children":[{"Type":"NodeText","Data":"7.错误信息控制"}]},{"ID":"20241014183623-c4fz0r8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014183623-c4fz0r8","updated":"20241014183709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"display_errors = Off #默认关闭，特殊情况打开，需要去检查\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014183723-ebauji5","Type":"NodeParagraph","Properties":{"id":"20241014183723-ebauji5","updated":"20241014183723"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014183723-dqb4igh.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241014183603-yvclmbs","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241014183603-yvclmbs","updated":"20241014183611"},"Children":[{"Type":"NodeText","Data":"8.错误日志记录"}]},{"ID":"20241014154041-qb2vj1u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241014154041-qb2vj1u","updated":"20241014154619"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"log_errors = On  #开启错误日志记录\nlog_errors_maxlen = 1024 #最大错误日志记录条数，可多设置，根据业务需求\n\nerror_log = /var/log/php/php_errors.log       #指定错误日志保存路径\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241014154358-0w22jt2","Type":"NodeParagraph","Properties":{"id":"20241014154358-0w22jt2","updated":"20241014154444"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014154436-gv7h1ml.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"width: 50%;","style":"width: 10000px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241014154358-nnl9hnb.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 10000px;\" parent-style=\"width: 50%;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241014154751-g70d1oc","Type":"NodeParagraph","Properties":{"id":"20241014154751-g70d1oc"}},{"ID":"20241014154752-xp6xxuo","Type":"NodeParagraph","Properties":{"id":"20241014154752-xp6xxuo"}},{"ID":"20241014154752-n3a8mia","Type":"NodeParagraph","Properties":{"id":"20241014154752-n3a8mia"}}]}