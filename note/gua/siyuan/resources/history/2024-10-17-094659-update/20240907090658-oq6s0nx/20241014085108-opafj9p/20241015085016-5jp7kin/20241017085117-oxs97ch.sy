{"ID":"20241017085117-oxs97ch","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f695","id":"20241017085117-oxs97ch","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20241017085117-oxs97ch\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20241017085117-8tu4ksi\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241017085117-8tu4ksi\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20241017085117-8tu4ksi\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"Linux入侵排查","updated":"20241017094628"},"Children":[{"ID":"20241017091908-mjxfngr","Type":"NodeParagraph","Properties":{"id":"20241017091908-mjxfngr"}},{"ID":"20241017085117-8tu4ksi","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241017085117-8tu4ksi","updated":"20241017091903"},"Children":[{"Type":"NodeText","Data":"1.账号安全"}]},{"ID":"20241017091909-3d4mlee","Type":"NodeParagraph","Properties":{"id":"20241017091909-3d4mlee","updated":"20241017092214"},"Children":[{"Type":"NodeText","Data":"用户信息文件 /etc/passwd"}]},{"ID":"20241017092130-7h7n1pf","Type":"NodeParagraph","Properties":{"id":"20241017092130-7h7n1pf","updated":"20241017092130"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017092130-fjdsjxf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017092052-e9gl80h","Type":"NodeParagraph","Properties":{"id":"20241017092052-e9gl80h","updated":"20241017092124"},"Children":[{"Type":"NodeText","Data":"用户：密码：用户ID：组ID：用户说明：用户家目录：登录shell"}]},{"ID":"20241017092132-nqr7eqh","Type":"NodeParagraph","Properties":{"id":"20241017092132-nqr7eqh","updated":"20241017092157"},"Children":[{"Type":"NodeText","Data":"PS：密码为空不能远程登录，只能本机登录，X是占位符，存在在shadow文件中"}]},{"ID":"20241017092125-c8p78lz","Type":"NodeParagraph","Properties":{"id":"20241017092125-c8p78lz"}},{"ID":"20241017092216-dnj8pkk","Type":"NodeParagraph","Properties":{"id":"20241017092216-dnj8pkk","updated":"20241017092223"},"Children":[{"Type":"NodeText","Data":"/etc/shadow文件"}]},{"ID":"20241017092300-7f4f742","Type":"NodeParagraph","Properties":{"id":"20241017092300-7f4f742","updated":"20241017092300"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017092300-46u6a92.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017092302-d5myvfz","Type":"NodeParagraph","Properties":{"id":"20241017092302-d5myvfz","updated":"20241017092529"},"Children":[{"Type":"NodeText","Data":"用户名：加密密码：密码最后一次修改日期：两次密码修改的间隔时间：密码有效期：密码到期警告天数：宽限天数：账号失效的时间：预留"}]},{"ID":"20241017092731-gbxxy3u","Type":"NodeParagraph","Properties":{"id":"20241017092731-gbxxy3u"}},{"ID":"20241017092732-ms4tktf","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241017092732-ms4tktf","updated":"20241017092740"},"Children":[{"Type":"NodeText","Data":"查看当前登录用户状态"}]},{"ID":"20241017092740-jnokb3k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017092740-jnokb3k","updated":"20241017092907"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"who 查看当前登录的用户\npts远程登录\npty本地登录\n\nw 查看系统信息 记录用户登录时间和交互方式\n\nuptime 查看登录多久，有多少用户，系统负载状态\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017092743-xk8ep7h","Type":"NodeParagraph","Properties":{"id":"20241017092743-xk8ep7h","updated":"20241017092743"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017092743-nj3grov.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017092931-wn68xli","Type":"NodeParagraph","Properties":{"id":"20241017092931-wn68xli"}},{"ID":"20241017092935-hesi38x","Type":"NodeParagraph","Properties":{"id":"20241017092935-hesi38x","updated":"20241017092945"},"Children":[{"Type":"NodeText","Data":"思路："}]},{"ID":"20241017092947-mrqc8fw","Type":"NodeParagraph","Properties":{"id":"20241017092947-mrqc8fw"},"Children":[{"Type":"NodeText","Data":"是否存在特权用户"}]},{"ID":"20241017093022-d3s4o42","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017093022-d3s4o42","updated":"20241017093234"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"awk -F: '$3==0{print $1}' /etc/passwd    #uid=0--》root\n关注root之外的用户\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017093155-o7gg0uc","Type":"NodeParagraph","Properties":{"id":"20241017093155-o7gg0uc","updated":"20241017093155"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017093155-unos5k7.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017092949-ovjxn07","Type":"NodeParagraph","Properties":{"id":"20241017092949-ovjxn07","updated":"20241017092956"},"Children":[{"Type":"NodeText","Data":"是否有远程登录用户"}]},{"ID":"20241017093238-6pomzkb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017093238-6pomzkb","updated":"20241017093639"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"awk '/\\$1|\\$6/{print $1}' /etc/shadow\n#关注密码字段的存储方式中指定$6的密码字段，$6是指可以远程登录的\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017093559-ich89v7","Type":"NodeParagraph","Properties":{"id":"20241017093559-ich89v7","updated":"20241017093559"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017093559-i3pcpky.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017092956-fhyees5","Type":"NodeParagraph","Properties":{"id":"20241017092956-fhyees5","updated":"20241017093008"},"Children":[{"Type":"NodeText","Data":"哪些用户可以访问sudo权限"}]},{"ID":"20241017093642-p9vpjg7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017093642-p9vpjg7","updated":"20241017094015"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"more /etc/sudoers |grep -v \"^#\\|^$\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017094043-ctj2op6","Type":"NodeParagraph","Properties":{"id":"20241017094043-ctj2op6","updated":"20241017094043"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017094043-pxowoho.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017094044-wtblo8a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017094044-wtblo8a","updated":"20241017094223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# more /etc/sudoers |grep -v \"^#\\|^$\" |grep \"ALL=(ALL)\"\nroot\tALL=(ALL) \tALL\n%wheel\tALL=(ALL)\tALL\n\n#正常情况来水，不能设置wheel组\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017094141-jsp6pn4","Type":"NodeParagraph","Properties":{"id":"20241017094141-jsp6pn4","updated":"20241017094141"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241017094141-9f6sz3r.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241017094225-k649ahr","Type":"NodeParagraph","Properties":{"id":"20241017094225-k649ahr"}},{"ID":"20241017093008-p1j31vt","Type":"NodeParagraph","Properties":{"id":"20241017093008-p1j31vt","updated":"20241017094342"},"Children":[{"Type":"NodeText","Data":"删除或禁用可以账号（注意:发现存在意思用户后，要先去禁用核查，然后在确定是否删除）"}]},{"ID":"20241017094303-awdiw8o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241017094303-awdiw8o","updated":"20241017094412"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"username -L username  #禁用username，在用户前添加！\nuserdel username\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241017094626-iz5bjj3","Type":"NodeParagraph","Properties":{"id":"20241017094626-iz5bjj3"}},{"ID":"20241017094628-9yj7cxr","Type":"NodeParagraph","Properties":{"id":"20241017094628-9yj7cxr"}}]}