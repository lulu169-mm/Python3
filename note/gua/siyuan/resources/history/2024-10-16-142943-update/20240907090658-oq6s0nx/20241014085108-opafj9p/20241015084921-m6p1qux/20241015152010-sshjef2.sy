{"ID":"20241015152010-sshjef2","Spec":"1","Type":"NodeDocument","Properties":{"icon":"21a9","id":"20241015152010-sshjef2","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20241015152010-sshjef2\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20241015152010-m789r5y\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241015154057-fjmy7vy\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20241015154057-fjmy7vy\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"web日志","updated":"20241016142556"},"Children":[{"ID":"20241016114709-udoof4h","Type":"NodeParagraph","Properties":{"id":"20241016114709-udoof4h"}},{"ID":"20241016114729-innz6dq","Type":"NodeParagraph","Properties":{"id":"20241016114729-innz6dq","updated":"20241016114729"},"Children":[{"Type":"NodeText","Data":"记录了web服务器的处理请求和数据包的内容"}]},{"ID":"20241016114729-2q9u22d","Type":"NodeParagraph","Properties":{"id":"20241016114729-2q9u22d","updated":"20241016114729"},"Children":[{"Type":"NodeText","Data":"一条完整的web日志包含的内容"}]},{"ID":"20241016115218-p3oalot","Type":"NodeParagraph","Properties":{"id":"20241016115218-p3oalot","updated":"20241016115338"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016115338-n88dozd.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"}]},{"ID":"20241016114710-s6aiqps","Type":"NodeParagraph","Properties":{"id":"20241016114710-s6aiqps"}},{"ID":"20241016123450-0g09g4u","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123450-0g09g4u","updated":"20241016123512"},"Children":[{"Type":"NodeText","Data":"1.查看哪些IP访问次数最多"}]},{"ID":"20241016123513-9o9pgu3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123513-9o9pgu3","updated":"20241016134641"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cut -d- -f 1 ./access_log |uniq -c |sort -rn | head -20\n     34 192.168.61.17 \n     25 192.168.61.17 \n      2 ::1 \n\n# cut文本提取 -d-指定分隔符为- -f 1 表示提取由破折号分隔的第一部分\n#uniq用于报告或忽略文件中的重复行 -c统计次数\n#sort用于对文本文件中的行进排序  -r反向排序（降序） -n 根据数值大小排序\n#head 用于输出文件前几行 \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016125245-aozvv51","Type":"NodeParagraph","Properties":{"id":"20241016125245-aozvv51","updated":"20241016125245"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016125245-z7sjfmj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016114710-u4oz80c","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016114710-u4oz80c","updated":"20241016123605"},"Children":[{"Type":"NodeText","Data":"2.统计当日有多少IP访问本机"}]},{"ID":"20241016123606-0z2t7qh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123606-0z2t7qh","updated":"20241016140603"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"awk '{print $1}' ./access_log |sort |uniq | wc -l\n#sort 用于对文本文件中的行进行排序\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016125318-kye10hx","Type":"NodeParagraph","Properties":{"id":"20241016125318-kye10hx","updated":"20241016125318"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016125318-sx9gefk.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123614-pwdwf54","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123614-pwdwf54","updated":"20241016123625"},"Children":[{"Type":"NodeText","Data":"3.某个页面被访问的次数"}]},{"ID":"20241016123626-ich3pib","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123626-ich3pib","updated":"20241016125422"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep \"/login.php\" ./access_log |wc -l\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016125417-bjv4x81","Type":"NodeParagraph","Properties":{"id":"20241016125417-bjv4x81","updated":"20241016125417"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016125417-bqvff3j.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123635-42ly8bs","Type":"NodeParagraph","Properties":{"id":"20241016123635-42ly8bs","updated":"20241016125503"},"Children":[{"Type":"NodeText","Data":"4."},{"Type":"NodeTextMark","Properties":{"style":"color: var(--b3-font-color9);"},"TextMarkType":"text","TextMarkTextContent":"查看某个IP访问了多少页面，排序输出"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"color: var(--b3-font-color9);\"}"}]},{"ID":"20241016123652-hoa2u10","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123652-hoa2u10","updated":"20241016140740"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# awk '{++S[$1]} END {for (a in S) print S[a],a}'  ./access_log |sort -n\n#{++S[$1]} 是 awk 的动作部分，使用数组 S 来存储每行的第一个字段（假设由空格分隔）的出现次数。\n#END 是一个特殊的 awk 模式，它在处理完所有输入行后执行。\n#{for (a in S) print S[a],a}' 是在 END 模式下的动作，它会遍历数组 S，并打印出每个元素的出现次数和元素本身（即记录的值和其出现的次数）。\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016125456-h5jb4wf","Type":"NodeParagraph","Properties":{"id":"20241016125456-h5jb4wf","updated":"20241016125456"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016125456-fuspgf5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123704-7xrw656","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123704-7xrw656","updated":"20241016123721"},"Children":[{"Type":"NodeText","Data":"5.查看某个IP访问了哪些页面"}]},{"ID":"20241016123721-kc0eij3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123721-kc0eij3","updated":"20241016125517"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep ^192.168.61.17 ./access_log |awk '{print $1,$7}'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016125540-8nh5c93","Type":"NodeParagraph","Properties":{"id":"20241016125540-8nh5c93","updated":"20241016125540"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016125540-zbsrmsx.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123729-82t4hyv","Type":"NodeParagraph","Properties":{"id":"20241016123729-82t4hyv"}},{"ID":"20241016123730-muejeqz","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123730-muejeqz","updated":"20241016123745"},"Children":[{"Type":"NodeText","Data":"6.查看某个时间段有多少ip在访问"}]},{"ID":"20241016123745-6gbemtl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123745-6gbemtl","updated":"20241016131822"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"awk '{print $4,$1}' ./access_log | grep 16/Oct/2024:19 | awk '{print $2}'| sort | uniq | wc -l \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016131833-jfp59ud","Type":"NodeParagraph","Properties":{"id":"20241016131833-jfp59ud","updated":"20241016131833"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016131833-qp1umc0.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123546-w0i4qu8","Type":"NodeParagraph","Properties":{"id":"20241016123546-w0i4qu8"}},{"ID":"20241015152010-m789r5y","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241015152010-m789r5y","updated":"20241015154046"},"Children":[{"Type":"NodeText","Data":"思路"}]},{"ID":"20241016123809-cwe887n","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241016123809-cwe887n","updated":"20241016131957"},"Children":[{"ID":"20241016123809-htef9dw","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241016123809-htef9dw"},"Children":[{"ID":"20241015154046-jgnfai9","Type":"NodeParagraph","Properties":{"id":"20241015154046-jgnfai9","updated":"20241015154428"},"Children":[{"Type":"NodeText","Data":"定位攻击源（通过日志内的关键攻击语句或攻击行为）  ---获取IP地址"}]}]},{"ID":"20241016123809-hj14hpz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241016123809-hj14hpz","updated":"20241016131957"},"Children":[{"ID":"20241015154428-dmx0dvs","Type":"NodeParagraph","Properties":{"id":"20241015154428-dmx0dvs","updated":"20241015154554"},"Children":[{"Type":"NodeText","Data":"通过查看ip在什么时间段或者请求的200状态的页面有哪些 ---获取他的攻击漏洞入口"}]},{"ID":"20241016123823-d89wfxl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123823-d89wfxl","updated":"20241016131957"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep ^192.168.61.27 ./access_log | awk '{print $1,$7,$9}' | grep 200 #定位目标ip范文200的页面\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241016123809-w80zav1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241016123809-w80zav1"},"Children":[{"ID":"20241015154057-fjmy7vy","Type":"NodeParagraph","Properties":{"id":"20241015154057-fjmy7vy","updated":"20241015154827"},"Children":[{"Type":"NodeText","Data":"查看他的攻击语句，分析其攻击语句使用的漏洞（SQL注入、文件上传、反序列化。。。）"}]}]},{"ID":"20241016123809-61yh5q9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241016123809-61yh5q9"},"Children":[{"ID":"20241015154828-98abreq","Type":"NodeParagraph","Properties":{"id":"20241015154828-98abreq","updated":"20241015154831"},"Children":[{"Type":"NodeText","Data":"IP溯源"}]},{"ID":"20241015154832-tn2gybp","Type":"NodeParagraph","Properties":{"id":"20241015154832-tn2gybp","updated":"20241015154942"},"Children":[{"Type":"NodeText","Data":"微步等查看ip的威胁状态，是否C2（如果是查看历史木马样本和攻击行为）或个人服务器（信息收集：扫描获取该ip的相关页面的内容）"}]}]}]},{"ID":"20241016123853-48fyfe0","Type":"NodeParagraph","Properties":{"id":"20241016123853-48fyfe0"}},{"ID":"20241016123855-kcafnjk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016123855-kcafnjk","updated":"20241016123900"},"Children":[{"Type":"NodeText","Data":"日志统计技巧"}]},{"ID":"20241016123904-3fjutf1","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123904-3fjutf1","updated":"20241016123932"},"Children":[{"Type":"NodeText","Data":"1.统计爬虫"}]},{"ID":"20241016123908-7ing4at","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123908-7ing4at","updated":"20241016123915"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"grep -E 'Googlebot|Baiduspider|\u003c其他网站爬虫特征\u003e' /var/log/httpd/access_log-20210620 | awk '{ print $1 }' | sort | uniq\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016123916-5d4jlmd","Type":"NodeParagraph","Properties":{"id":"20241016123916-5d4jlmd"}},{"ID":"20241016123917-uu6envu","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123917-uu6envu","updated":"20241016123941"},"Children":[{"Type":"NodeText","Data":"2.统计浏览器"}]},{"ID":"20241016123920-p8nfgio","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123920-p8nfgio","updated":"20241016142128"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat access_log-20210620 | grep -v -E 'MSIE|Firefox|Chrome|Opera|Safari|Gecko|Maxthon' | sort | uniq -c | sort -r -n\n#定位木马、蚁剑、SQ注入等攻击行为，来自172.16.12.133\nfind / -name *uc.php\n/var/www/html/api/uc.php\ncat /var/www/html/api/uc.php\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016142023-x2ftcjv","Type":"NodeParagraph","Properties":{"id":"20241016142023-x2ftcjv","updated":"20241016142023"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016142023-87su6ze.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016123943-k8fap68","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016123943-k8fap68","updated":"20241016123951"},"Children":[{"Type":"NodeText","Data":"3.ip统计"}]},{"ID":"20241016123953-vrudozd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016123953-vrudozd","updated":"20241016123958"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# grep '14/Jun/2021' access_log-20210620 | awk '{print $1}' | awk -F'.' '{print $1\".\"$2\".\"$3\".\"$4}' | sort | uniq -c | sort -r -n | head -n 10\n   1081 172.16.12.133\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016142204-zhszcid","Type":"NodeParagraph","Properties":{"id":"20241016142204-zhszcid","updated":"20241016142217"},"Children":[{"Type":"NodeText","Data":"​​"}]},{"ID":"20241016124002-3se0ch3","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016124002-3se0ch3","updated":"20241016124007"},"Children":[{"Type":"NodeText","Data":"4.统计网段"}]},{"ID":"20241016124011-fv78ky8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016124011-fv78ky8","updated":"20241016124023"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# cat access_log-20210620 | awk '{print $1}' | awk -F'.' '{print $1\".\"$2\".\"$3\".0\"}' | sort | uniq -c | sort -r -n | head -n 200 \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016124026-8xce56s","Type":"NodeParagraph","Properties":{"id":"20241016124026-8xce56s","updated":"20241016142219"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016142204-kfc1b2a.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016124027-v9tofew","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016124027-v9tofew","updated":"20241016124045"},"Children":[{"Type":"NodeText","Data":"5.统计域名、http状态、url"}]},{"ID":"20241016124050-0yy9ete","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016124050-0yy9ete","updated":"20241016124059"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# cat access_log-20210620 |awk '{print $2}'|sort|uniq -c|sort -rn|more \t#统计域名\n   1275 -\n      1 \n[root@localhost httpd]# cat access_log-20210620 |awk '{print $9}'|sort|uniq -c|sort -rn|more \t#统计http状态\n   1259 200\n      7 404\n      3 304\n      3 302\n      3 301\n      1 \n[root@localhost httpd]# cat access_log-20210620 |awk '{print $7}'|sort|uniq -c|sort -rn|more \t#统计URL\n    188 /ad_js.php?ad_id=1\n     37 /api/uc.php\n     18 /\n     14 /ad_js.php?ad_id=1%20ORDER%20BY%208--%20-\n     14 /ad_js.php?ad_id=1%20ORDER%20BY%207--%20-\n     14 /ad_js.php?ad_id=1%20ORDER%20BY%206--%20-\n     14 /ad_js.php?ad_id=1%20ORDER%20BY%201--%20-\n     14 /ad_js.php?ad_id=1%20ORDER%20BY%2010--%20-\n     13 *\n     10 /admin/tpl_manage.php\n\n\n#注意：统计出来后需要重点关注文件\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016124104-w5dnznw","Type":"NodeParagraph","Properties":{"id":"20241016124104-w5dnznw"}},{"ID":"20241016124105-hori6bu","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016124105-hori6bu","updated":"20241016124112"},"Children":[{"Type":"NodeText","Data":"6.文件流量统计"}]},{"ID":"20241016124113-z19lclr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016124113-z19lclr","updated":"20241016124119"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat access_log-20210620 |awk '{sum[$7]+=$10}END{for(i in sum){print sum[i],i}}'|sort -rn|more\n279352 /templates/default/css/jquery.js\n165053 /api/uc.php?1=phpinfo();\n162452 /\n137337 /phpmyadmin/themes/pmahomme/img/sprites.png\n98652 /templates/default/css/index.css\n70424 /phpmyadmin/themes/pmahomme/jquery/jquery-ui-1.11.2.css\n63131 /admin/tpl_manage.php\n    #需要关注文件的范围跟和有特殊名称文件，如以上的/api/uc.php?1=phpinfo();\n  \n  \n方法2：\n[root@localhost httpd]# grep ' 200 ' access_log-20210620 |awk '{sum[$7]+=$10}END{for(i in sum){print sum[i],i}}'|sort -rn|more  \n279352 /templates/default/css/jquery.js\n165053 /api/uc.php?1=phpinfo();\n162452 /\n137337 /phpmyadmin/themes/pmahomme/img/sprites.png\n98652 /templates/default/css/index.css\n70424 /phpmyadmin/themes/pmahomme/jquery/jquery-ui-1.11.2.css\n63131 /admin/tpl_manage.php\n57725 /templates/default/images/kefu_bg.gif\n56706 /phpmyadmin/favicon.ico\n42760 /phpmyadmin/phpmyadmin.css.php?nocache=3248222921ltr\n41634 /templates/default/images/logo.gif\n24955 /phpmyadmin/js/get_scripts.js.php?scripts%5B%5D=makegrid.js\u0026scripts%5B%5D=jquery/jquery.uitablefilter.js\u0026scripts%5B%5D=sql.js\u0026call_done=1\n21380 /phpmyadmin/phpmyadmin.css.php?nocache=4872335373ltr\n21380 /phpmyadmin/phpmyadmin.css.php?nocache=4872334461ltr\n21380 /phpmyadmin/phpmyadmin.css.php?nocache=4872334311ltr\n18024 /admin/index.php?act=menu\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016124122-co1u59u","Type":"NodeParagraph","Properties":{"id":"20241016124122-co1u59u"}},{"ID":"20241016124123-kmvxewq","Type":"NodeHeading","HeadingLevel":6,"Properties":{"id":"20241016124123-kmvxewq","updated":"20241016124132"},"Children":[{"Type":"NodeText","Data":"7.URL访问量"}]},{"ID":"20241016124135-w5uvtr1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016124135-w5uvtr1","updated":"20241016124140"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat access_log-20210620 | awk '{print $7}' | egrep '\\?|\u0026' | sort | uniq -c | sort -rn | more   \n注意：查出来的URL要去注意排查，如果存在漏洞攻击特征的，需要去复现是否存在该漏洞\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016142535-hllhqkk","Type":"NodeParagraph","Properties":{"id":"20241016142535-hllhqkk","updated":"20241016142535"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016142535-06hjtdq.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016142556-snulp1c","Type":"NodeParagraph","Properties":{"id":"20241016142556-snulp1c","updated":"20241016142556"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016142556-xoakrtf.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}