{"ID":"20241015162944-axehz6h","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f201","id":"20241015162944-axehz6h","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20241015162944-axehz6h\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20241015162944-3pxe208\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20241015162944-3pxe208\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20241015162944-3pxe208\u0026quot;,\u0026quot;focusStart\u0026quot;:21,\u0026quot;focusEnd\u0026quot;:21\u0026#125;","title":"数据库日志分析","updated":"20241016153919"},"Children":[{"ID":"20241016150404-eh5k330","Type":"NodeParagraph","Properties":{"id":"20241016150404-eh5k330","updated":"20241016150437"},"Children":[{"Type":"NodeText","Data":"数据库管理工具内的日志查看器，逐行分析"}]},{"ID":"20241016150248-au5uj1b","Type":"NodeHeading","HeadingLevel":5,"Properties":{"fold":"1","id":"20241016150248-au5uj1b","updated":"20241016150254"},"Children":[{"Type":"NodeText","Data":"分类"}]},{"ID":"20241015162944-3pxe208","Type":"NodeParagraph","Properties":{"fold":"1","heading-fold":"1","id":"20241015162944-3pxe208","updated":"20241015163450"},"Children":[{"Type":"NodeText","Data":"错误日志\n查询日志\n慢查询日志\n二进制日志"}]},{"ID":"20241016150300-se9dgnx","Type":"NodeParagraph","Properties":{"id":"20241016150300-se9dgnx"}},{"ID":"20241016150442-310ilk2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016150442-310ilk2","updated":"20241016150452"},"Children":[{"Type":"NodeText","Data":"MYSQL日志"}]},{"ID":"20241016150503-zmrihcy","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241016150503-zmrihcy","updated":"20241016150513"},"Children":[{"Type":"NodeText","Data":"1.打开日志，查看日志的配置路径"}]},{"ID":"20241016150514-vs40iwx","Type":"NodeParagraph","Properties":{"id":"20241016150514-vs40iwx","updated":"20241016151045"},"Children":[{"Type":"NodeText","Data":"error默认开启，查看log_error文件"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SHOW GLOBAL VARIABLES LIKE \u0026quot;log_error\u0026quot;;"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016151141-89kwavm","Type":"NodeParagraph","Properties":{"id":"20241016151141-89kwavm","updated":"20241016151147"},"Children":[{"Type":"NodeText","Data":"路径：/var/log/mariadb/mariadb.log"}]},{"ID":"20241016151128-hwxlp7c","Type":"NodeParagraph","Properties":{"id":"20241016151128-hwxlp7c","updated":"20241016151128"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016151128-8bfysp2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016150523-vhdxgqi","Type":"NodeParagraph","Properties":{"id":"20241016150523-vhdxgqi"}},{"ID":"20241016151201-62pgsih","Type":"NodeParagraph","Properties":{"id":"20241016151201-62pgsih","updated":"20241016151457"},"Children":[{"Type":"NodeText","Data":"查询日志：关注是否打开，并且设置了日志文件路径，如果没有，则需要打开并设置路径​"}]},{"ID":"20241016151459-33t443f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016151459-33t443f","updated":"20241016151803"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"SHOW GLOBAL VARIABLES LIKE \"%general_log%\";\n\n打开或关闭的方法：\nset GLOBAL general_log = on;\n\nset GLOBAL general_log_file ='./mysql.log';\t#设置路径\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016151537-4zj6ebx","Type":"NodeParagraph","Properties":{"id":"20241016151537-4zj6ebx","updated":"20241016151839"},"Children":[{"Type":"NodeText","Data":"​​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016151839-mrwv3k3.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​​"}]},{"ID":"20241016151609-ovrlijj","Type":"NodeParagraph","Properties":{"id":"20241016151609-ovrlijj"}},{"ID":"20241016151609-kru0qif","Type":"NodeParagraph","Properties":{"id":"20241016151609-kru0qif","updated":"20241016151611"},"Children":[{"Type":"NodeText","Data":"解析general_og文件记录的日志内容："}]},{"ID":"20241016152938-n9hhpsx","Type":"NodeParagraph","Properties":{"id":"20241016152938-n9hhpsx","updated":"20241016152938"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016152938-hkipb72.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016152944-yptev8y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016152944-yptev8y","updated":"20241016153133"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"time #执行的时间  没有时间表示同一条语句\nid  #线程ID\ncommand #操作类型：query --查询 connect --链接 init DB --链接的数据库名称 quit --断开链接\nargument  #数据库操作语句\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016153142-hnh23vc","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241016153142-hnh23vc","updated":"20241016153150"},"Children":[{"Type":"NodeText","Data":"2.登录成功和失败的语句"}]},{"ID":"20241016153633-oycb2kp","Type":"NodeParagraph","Properties":{"id":"20241016153633-oycb2kp","updated":"20241016153633"},"Children":[{"Type":"NodeText","Data":"前面三条是登录失败的语句，最后一条是登录成功的："}]},{"ID":"20241016153633-aefbazj","Type":"NodeParagraph","Properties":{"id":"20241016153633-aefbazj","updated":"20241016153633"},"Children":[{"Type":"NodeText","Data":"爆破登录成功的格式：包括命令行登录、navicat工具链接、其他爆破工具格式都相同"}]},{"ID":"20241016153612-bnnet6c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016153612-bnnet6c","updated":"20241016153657"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"241014 20:15:39\t  251 Connect\tetsafe123@192.168.188.128 as anonymous on \t#链接语句，包含用户名和IP地址\n         \t\t  251 Query\t《此处存在一条SQL查询语句》\n                  251 Quit\t#退出的操作\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016153611-wiy34go","Type":"NodeParagraph","Properties":{"id":"20241016153611-wiy34go","updated":"20241016153611"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241016153611-nmgjg1u.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241016153716-4bedurb","Type":"NodeParagraph","Properties":{"id":"20241016153716-4bedurb"}},{"ID":"20241016153903-bk947gc","Type":"NodeParagraph","Properties":{"id":"20241016153903-bk947gc","updated":"20241016153903"},"Children":[{"Type":"NodeText","Data":"查询哪些IP在爆破数据库："}]},{"ID":"20241016153903-5dig4m1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016153903-5dig4m1","updated":"20241016153919"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# grep \"Access denied\" /var/lib/mysql/mysql.log |cut -d \"'\" -f4|uniq -c | sort -nr\n     13 192.168.61.38\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016153903-uy58gvb","Type":"NodeParagraph","Properties":{"id":"20241016153903-uy58gvb","updated":"20241016153903"},"Children":[{"Type":"NodeText","Data":"查询其用了哪些用户名字典： #就是查爆破了哪些用户"}]},{"ID":"20241016153903-mavmfmu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241016153903-mavmfmu","updated":"20241016153903"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"[root@localhost httpd]# grep \"Access denied\" /var/lib/mysql/mysql.log |cut -d \"'\" -f2|uniq -c | sort -nr\n     13 root\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241016153725-udf56qb","Type":"NodeParagraph","Properties":{"id":"20241016153725-udf56qb","updated":"20241016153852"}},{"ID":"20241016153733-2xqgs15","Type":"NodeParagraph","Properties":{"id":"20241016153733-2xqgs15"}}]}